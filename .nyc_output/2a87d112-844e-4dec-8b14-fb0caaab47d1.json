{"X:\\workflow\\open-projects\\ics-calendar\\libs\\server\\server.js":{"path":"X:\\workflow\\open-projects\\ics-calendar\\libs\\server\\server.js","statementMap":{"0":{"start":{"line":5,"column":0},"end":{"line":74,"column":2}},"1":{"start":{"line":6,"column":16},"end":{"line":6,"column":88}},"2":{"start":{"line":8,"column":19},"end":{"line":8,"column":40}},"3":{"start":{"line":9,"column":21},"end":{"line":9,"column":40}},"4":{"start":{"line":13,"column":20},"end":{"line":13,"column":38}},"5":{"start":{"line":14,"column":17},"end":{"line":14,"column":33}},"6":{"start":{"line":16,"column":18},"end":{"line":16,"column":36}},"7":{"start":{"line":17,"column":14},"end":{"line":17,"column":23}},"8":{"start":{"line":18,"column":17},"end":{"line":18,"column":33}},"9":{"start":{"line":19,"column":17},"end":{"line":19,"column":34}},"10":{"start":{"line":20,"column":21},"end":{"line":20,"column":43}},"11":{"start":{"line":21,"column":17},"end":{"line":21,"column":40}},"12":{"start":{"line":22,"column":21},"end":{"line":22,"column":43}},"13":{"start":{"line":23,"column":21},"end":{"line":23,"column":50}},"14":{"start":{"line":24,"column":15},"end":{"line":24,"column":30}},"15":{"start":{"line":25,"column":14},"end":{"line":25,"column":28}},"16":{"start":{"line":27,"column":4},"end":{"line":27,"column":30}},"17":{"start":{"line":28,"column":4},"end":{"line":28,"column":27}},"18":{"start":{"line":29,"column":4},"end":{"line":29,"column":56}},"19":{"start":{"line":30,"column":4},"end":{"line":30,"column":31}},"20":{"start":{"line":31,"column":4},"end":{"line":31,"column":20}},"21":{"start":{"line":35,"column":4},"end":{"line":35,"column":38}},"22":{"start":{"line":36,"column":4},"end":{"line":36,"column":35}},"23":{"start":{"line":40,"column":4},"end":{"line":40,"column":39}},"24":{"start":{"line":42,"column":22},"end":{"line":42,"column":43}},"25":{"start":{"line":47,"column":4},"end":{"line":47,"column":82}},"26":{"start":{"line":48,"column":4},"end":{"line":48,"column":78}},"27":{"start":{"line":51,"column":4},"end":{"line":53,"column":7}},"28":{"start":{"line":52,"column":8},"end":{"line":52,"column":147}},"29":{"start":{"line":58,"column":4},"end":{"line":60,"column":7}},"30":{"start":{"line":59,"column":8},"end":{"line":59,"column":95}},"31":{"start":{"line":61,"column":4},"end":{"line":61,"column":25}},"32":{"start":{"line":66,"column":17},"end":{"line":72,"column":6}},"33":{"start":{"line":68,"column":19},"end":{"line":68,"column":78}},"34":{"start":{"line":70,"column":19},"end":{"line":70,"column":40}},"35":{"start":{"line":71,"column":8},"end":{"line":71,"column":64}},"36":{"start":{"line":73,"column":4},"end":{"line":73,"column":18}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":18}},"loc":{"start":{"line":5,"column":29},"end":{"line":74,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":51,"column":20},"end":{"line":51,"column":21}},"loc":{"start":{"line":51,"column":40},"end":{"line":53,"column":5}},"line":51},"2":{"name":"(anonymous_2)","decl":{"start":{"line":58,"column":12},"end":{"line":58,"column":13}},"loc":{"start":{"line":58,"column":45},"end":{"line":60,"column":5}},"line":58},"3":{"name":"(anonymous_3)","decl":{"start":{"line":66,"column":41},"end":{"line":66,"column":42}},"loc":{"start":{"line":66,"column":53},"end":{"line":72,"column":5}},"line":66}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":88}},"type":"cond-expr","locations":[{"start":{"line":6,"column":69},"end":{"line":6,"column":81}},{"start":{"line":6,"column":84},"end":{"line":6,"column":88}}],"line":6},"1":{"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":66}},"type":"binary-expr","locations":[{"start":{"line":6,"column":16},"end":{"line":6,"column":36}},{"start":{"line":6,"column":40},"end":{"line":6,"column":66}}],"line":6},"2":{"loc":{"start":{"line":68,"column":20},"end":{"line":68,"column":50}},"type":"binary-expr","locations":[{"start":{"line":68,"column":20},"end":{"line":68,"column":44}},{"start":{"line":68,"column":48},"end":{"line":68,"column":50}}],"line":68}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1},"f":{"0":1,"1":1,"2":0,"3":1},"b":{"0":[1,0],"1":[1,1],"2":[1,0]},"inputSourceMap":{"version":3,"sources":["server.js"],"names":["module","exports","DEBUG","require","listRoutes","notify","express","app","router","Router","morgan","bodyParser","config","ServerAuth","ServerCtrs","cors","ejs","set","use","urlencoded","extended","json","engine","__express","AppUseAuth","controllers","get","calendar","bind","database","all","req","res","status","message","url","available_routes","stack","error","next","toString","server","listen","port","host","address","replace"],"mappings":";;AAAA;;AAEAA,OAAOC,OAAP,GAAiB,YAAkB;AAAA,QAAjBC,KAAiB,uEAAT,IAAS;;AAAA,mBAERC,QAAQ,UAAR,GAFQ;AAAA,QAEvBC,UAFuB,YAEvBA,UAFuB;AAG/B;;;AAH+B,oBAIZD,QAAQ,SAAR,CAJY;AAAA,QAIvBE,MAJuB,aAIvBA,MAJuB;;AAK/B,QAAMC,UAAUH,QAAQ,SAAR,CAAhB;AACA,QAAMI,MAAMD,SAAZ;AACA,QAAME,SAASF,QAAQG,MAAR,EAAf;AACA,QAAMC,SAASP,QAAQ,QAAR,CAAf;AACA,QAAMQ,aAAaR,QAAQ,aAAR,CAAnB;AACA,QAAMS,SAAST,QAAQ,cAAR,CAAf;AACA,QAAMU,aAAaV,QAAQ,QAAR,EAAkBI,GAAlB,CAAnB;AACA,QAAMO,aAAaX,QAAQ,eAAR,EAAyBI,GAAzB,CAAnB;AACA,QAAMQ,OAAOZ,QAAQ,MAAR,CAAb;AACA,QAAMa,MAAMb,QAAQ,KAAR,CAAZ;;AAEAI,QAAIU,GAAJ,CAAQ,aAAR,EAAuB,CAAvB,EAhB+B,CAgBL;AAC1BV,QAAIW,GAAJ,CAAQR,OAAO,KAAP,CAAR;AACAH,QAAIW,GAAJ,CAAQP,WAAWQ,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACAb,QAAIW,GAAJ,CAAQP,WAAWU,IAAX,EAAR;AACAd,QAAIW,GAAJ,CAAQH,MAAR;;AAEA;AACA;AACAR,QAAIe,MAAJ,CAAW,MAAX,EAAmBN,IAAIO,SAAvB;AACAhB,QAAIU,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;;AAEA;AACA;AACA,QAAIJ,UAAJ,CAAeX,KAAf,EAAsBsB,UAAtB;AACA;AACA,QAAMC,cAAc,IAAIX,UAAJ,CAAeZ,KAAf,CAApB;;AAEA;AACA;AACA;AACAM,WAAOkB,GAAP,CAAW,yBAAX,EAAsCD,YAAYE,QAAZ,CAAqBC,IAArB,CAA0BH,WAA1B,CAAtC;AACAjB,WAAOkB,GAAP,CAAW,qBAAX,EAAkCD,YAAYI,QAAZ,CAAqBD,IAArB,CAA0BH,WAA1B,CAAlC;;AAEA;AACAjB,WAAOsB,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAChC,eAAOA,IAAIC,MAAJ,CAAW,GAAX,EAAgBZ,IAAhB,CAAqB,EAAEa,SAAS,yBAAX,EAAsCC,KAAKJ,IAAII,GAA/C,EAAoDC,kBAAkBhC,WAAWI,OAAO6B,KAAlB,CAAtE,EAAgGJ,QAAQ,GAAxG,EAArB,CAAP;AACH,KAFD;;AAIA;AACA;AACA;AACA1B,QAAIW,GAAJ,CAAQ,UAAUoB,KAAV,EAAiBP,GAAjB,EAAsBC,GAAtB,EAA2BO,IAA3B,EAAiC;AACrCP,YAAIC,MAAJ,CAAW,GAAX,EAAgBZ,IAAhB,CAAqB,EAAEiB,OAAOA,MAAME,QAAN,EAAT,EAA2BN,SAAS,0BAApC,EAArB;AACH,KAFD;AAGA3B,QAAIW,GAAJ,CAAQ,GAAR,EAAaV,MAAb;;AAEA;AACA;;AAEA,QAAMiC,SAASlC,IAAImC,MAAJ,CAAW9B,OAAO+B,IAAlB,EAAwB,YAAY;AAC/C;AACA,YAAMC,OAAO,CAACH,OAAOI,OAAP,GAAiBA,OAAjB,IAA4B,EAA7B,EAAiCC,OAAjC,CAAyC,IAAzC,EAA+C,WAA/C,CAAb;AACA;AACA,YAAMH,OAAOF,OAAOI,OAAP,GAAiBF,IAA9B;AACAtC,6CAAmCuC,IAAnC,SAA2CD,IAA3C;AACH,KANc,CAAf;AAOA,WAAOF,MAAP;AACH,CA/DD","file":"server.js","sourceRoot":"X:/workflow/open-projects/ics-calendar/libs/server","sourcesContent":["`use strict`\r\n\r\nmodule.exports = (DEBUG = true) => {\r\n\r\n    const { listRoutes } = require('../utils')()\r\n    // @ts-ignore\r\n    const { notify } = require('x-units')\r\n    const express = require('express')\r\n    const app = express()\r\n    const router = express.Router()\r\n    const morgan = require('morgan')\r\n    const bodyParser = require('body-parser')\r\n    const config = require('../../config')\r\n    const ServerAuth = require('./auth')(app)\r\n    const ServerCtrs = require('./controllers')(app)\r\n    const cors = require('cors')\r\n    const ejs = require('ejs')\r\n\r\n    app.set('trust proxy', 1) // trust first proxy\r\n    app.use(morgan('dev'))\r\n    app.use(bodyParser.urlencoded({ extended: false }))\r\n    app.use(bodyParser.json())\r\n    app.use(cors())\r\n\r\n    // for rendering html\r\n    // @ts-ignore\r\n    app.engine('html', ejs.__express)\r\n    app.set('view engine', 'html')\r\n\r\n    /// ///////////////////\r\n    // Initialize server controllers\r\n    new ServerAuth(DEBUG).AppUseAuth()\r\n    // Our SimpleOrder application is initialized from `ServerCtrs`\r\n    const controllers = new ServerCtrs(DEBUG)\r\n\r\n    /// //////////////////\r\n    // set server routes\r\n    // router.get('/calendar/:userId', controllers.calendar.bind(controllers));\r\n    router.get('/calendar/:type/:userId', controllers.calendar.bind(controllers))\r\n    router.get('/database/:document', controllers.database.bind(controllers))\r\n\r\n    // catch all other calls\r\n    router.all('*', function (req, res) {\r\n        return res.status(200).json({ message: 'welcome to ics-calendar', url: req.url, available_routes: listRoutes(router.stack), status: 200 })\r\n    })\r\n\r\n    /// //////////////////\r\n    // handle errors\r\n    // @ts-ignore\r\n    app.use(function (error, req, res, next) {\r\n        res.status(500).json({ error: error.toString(), message: 'ups something went wrong' })\r\n    })\r\n    app.use('/', router)\r\n\r\n    /// //////////////////\r\n    // Initialize server\r\n\r\n    const server = app.listen(config.port, function () {\r\n        // @ts-ignore\r\n        const host = (server.address().address || '').replace(/::/, 'localhost')\r\n        // @ts-ignore\r\n        const port = server.address().port\r\n        notify(`server runnign on http://${host}:${port}`)\r\n    })\r\n    return server\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5c9ab332cb9687022e0a43c9aad71af57af234a7","contentHash":"e682baa3253047d00b9fbe6c470fb43fda4c826772ef9a638076a0f5fc45a650"},"X:\\workflow\\open-projects\\ics-calendar\\libs\\utils.js":{"path":"X:\\workflow\\open-projects\\ics-calendar\\libs\\utils.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":38,"column":2}},"1":{"start":{"line":4,"column":19},"end":{"line":4,"column":36}},"2":{"start":{"line":5,"column":17},"end":{"line":5,"column":32}},"3":{"start":{"line":7,"column":12},"end":{"line":7,"column":14}},"4":{"start":{"line":13,"column":4},"end":{"line":19,"column":6}},"5":{"start":{"line":14,"column":18},"end":{"line":14,"column":88}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":27}},"7":{"start":{"line":16,"column":18},"end":{"line":16,"column":27}},"8":{"start":{"line":17,"column":8},"end":{"line":17,"column":73}},"9":{"start":{"line":17,"column":61},"end":{"line":17,"column":73}},"10":{"start":{"line":18,"column":8},"end":{"line":18,"column":29}},"11":{"start":{"line":21,"column":4},"end":{"line":25,"column":6}},"12":{"start":{"line":22,"column":8},"end":{"line":24,"column":11}},"13":{"start":{"line":23,"column":12},"end":{"line":23,"column":33}},"14":{"start":{"line":27,"column":4},"end":{"line":36,"column":6}},"15":{"start":{"line":28,"column":8},"end":{"line":35,"column":15}},"16":{"start":{"line":29,"column":12},"end":{"line":33,"column":13}},"17":{"start":{"line":30,"column":16},"end":{"line":32,"column":17}},"18":{"start":{"line":31,"column":20},"end":{"line":31,"column":53}},"19":{"start":{"line":34,"column":12},"end":{"line":34,"column":21}},"20":{"start":{"line":37,"column":4},"end":{"line":37,"column":13}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":17},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":29},"end":{"line":38,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":13},"end":{"line":13,"column":14}},"loc":{"start":{"line":13,"column":25},"end":{"line":19,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":18},"end":{"line":21,"column":19}},"loc":{"start":{"line":21,"column":34},"end":{"line":25,"column":5}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":27},"end":{"line":22,"column":28}},"loc":{"start":{"line":22,"column":46},"end":{"line":24,"column":9}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":27,"column":19},"end":{"line":27,"column":20}},"loc":{"start":{"line":27,"column":36},"end":{"line":36,"column":5}},"line":27},"5":{"name":"(anonymous_5)","decl":{"start":{"line":28,"column":29},"end":{"line":28,"column":30}},"loc":{"start":{"line":28,"column":49},"end":{"line":35,"column":9}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":18},"end":{"line":14,"column":88}},"type":"cond-expr","locations":[{"start":{"line":14,"column":71},"end":{"line":14,"column":83}},{"start":{"line":14,"column":86},"end":{"line":14,"column":88}}],"line":14},"1":{"loc":{"start":{"line":14,"column":18},"end":{"line":14,"column":68}},"type":"binary-expr","locations":[{"start":{"line":14,"column":18},"end":{"line":14,"column":38}},{"start":{"line":14,"column":42},"end":{"line":14,"column":68}}],"line":14},"2":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":27}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":27}},{"start":{"line":16,"column":8},"end":{"line":16,"column":27}}],"line":16},"3":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":73}},"type":"if","locations":[{"start":{"line":17,"column":8},"end":{"line":17,"column":73}},{"start":{"line":17,"column":8},"end":{"line":17,"column":73}}],"line":17},"4":{"loc":{"start":{"line":29,"column":12},"end":{"line":33,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":33,"column":13}},{"start":{"line":29,"column":12},"end":{"line":33,"column":13}}],"line":29},"5":{"loc":{"start":{"line":30,"column":16},"end":{"line":32,"column":17}},"type":"if","locations":[{"start":{"line":30,"column":16},"end":{"line":32,"column":17}},{"start":{"line":30,"column":16},"end":{"line":32,"column":17}}],"line":30},"6":{"loc":{"start":{"line":30,"column":21},"end":{"line":30,"column":48}},"type":"binary-expr","locations":[{"start":{"line":30,"column":21},"end":{"line":30,"column":42}},{"start":{"line":30,"column":46},"end":{"line":30,"column":48}}],"line":30},"7":{"loc":{"start":{"line":30,"column":22},"end":{"line":30,"column":36}},"type":"binary-expr","locations":[{"start":{"line":30,"column":22},"end":{"line":30,"column":30}},{"start":{"line":30,"column":34},"end":{"line":30,"column":36}}],"line":30}},"s":{"0":1,"1":3,"2":3,"3":3,"4":3,"5":452,"6":452,"7":0,"8":452,"9":0,"10":452,"11":3,"12":168,"13":168,"14":3,"15":1,"16":3,"17":3,"18":2,"19":3,"20":3},"f":{"0":3,"1":452,"2":168,"3":168,"4":1,"5":3},"b":{"0":[452,0],"1":[452,452],"2":[0,452],"3":[0,452],"4":[3,0],"5":[2,1],"6":[3,0],"7":[3,0]},"inputSourceMap":{"version":3,"sources":["utils.js"],"names":["module","exports","require","reduce","o","date","str","Date","toDateString","dataAsync","data","Promise","resolve","listRoutes","stack","n","el","k","route","path","indexOf","push"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiB,YAAY;AAAA,mBACNC,QAAQ,QAAR,CADM;AAAA,QACjBC,MADiB,YACjBA,MADiB;;AAEzB,QAAMC,IAAI,EAAV;;AAEA;;;;AAIAA,MAAEC,IAAF,GAAS,YAAc;AAAA,YAAbC,GAAa,uEAAP,EAAO;;AACnB,YAAI,CAACA,GAAL,EAAUA,MAAM,EAAN;AACV,YAAK,IAAIC,IAAJ,CAASD,GAAT,CAAD,CAAgBE,YAAhB,OAAmC,cAAvC,EAAuD,OAAO,IAAP;AACvD,eAAO,IAAID,IAAJ,CAASD,GAAT,CAAP;AACH,KAJD;;AAMAF,MAAEK,SAAF,GAAc,UAACC,IAAD,EAAU;AACpB,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD;AAAA,mBAAaA,QAAQF,IAAR,CAAb;AAAA,SAAZ,CAAP;AACH,KAFD;;AAIAN,MAAES,UAAF,GAAe,UAACC,KAAD,EAAW;AACtB,eAAOX,OAAOW,KAAP,EAAc,UAACC,CAAD,EAAIC,EAAJ,EAAQC,CAAR,EAAc;AAC/B,gBAAID,GAAGE,KAAP,EAAc;AACV,oBAAI,CAAC,CAACF,GAAGE,KAAH,IAAY,EAAb,EAAiBC,IAAjB,IAAyB,EAA1B,EAA8BC,OAA9B,CAAsC,GAAtC,MAA+C,CAAC,CAApD,EAAuD;AACnDL,sBAAEM,IAAF,CAAO,EAAEH,OAAOF,GAAGE,KAAH,CAASC,IAAlB,EAAP;AACH;AACJ;AACD,mBAAOJ,CAAP;AACH,SAPM,EAOJ,EAPI,CAAP;AAQH,KATD;AAUA,WAAOX,CAAP;AACH,CA7BD","file":"utils.js","sourceRoot":"X:/workflow/open-projects/ics-calendar/libs","sourcesContent":["module.exports = function () {\r\n    const { reduce } = require('lodash')\r\n    const o = {}\r\n\r\n    /** \r\n     * @param str must provide valid date format, example: `2017-12-15`\r\n     * @returns new Date() or null\r\n    */\r\n    o.date = (str = '') => {\r\n        if (!str) str = ''\r\n        if ((new Date(str)).toDateString() === 'Invalid Date') return null\r\n        return new Date(str)\r\n    }\r\n\r\n    o.dataAsync = (data) => {\r\n        return new Promise((resolve) => resolve(data))\r\n    }\r\n\r\n    o.listRoutes = (stack) => {\r\n        return reduce(stack, (n, el, k) => {\r\n            if (el.route) {\r\n                if (((el.route || {}).path || '').indexOf('/') !== -1) {\r\n                    n.push({ route: el.route.path })\r\n                }\r\n            }\r\n            return n\r\n        }, [])\r\n    }\r\n    return o\r\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"57b87d34d01f3c6146f665b9e374b8fd37f88c13","contentHash":"03ada4e194d1d4e56418d30aabe04527774b40a84732c074914cd75dcf47a436"},"X:\\workflow\\open-projects\\ics-calendar\\libs\\server\\auth.js":{"path":"X:\\workflow\\open-projects\\ics-calendar\\libs\\server\\auth.js","statementMap":{"0":{"start":{"line":3,"column":19},"end":{"line":3,"column":563}},"1":{"start":{"line":3,"column":76},"end":{"line":3,"column":347}},"2":{"start":{"line":3,"column":89},"end":{"line":3,"column":90}},"3":{"start":{"line":3,"column":134},"end":{"line":3,"column":142}},"4":{"start":{"line":3,"column":144},"end":{"line":3,"column":199}},"5":{"start":{"line":3,"column":200},"end":{"line":3,"column":231}},"6":{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},"7":{"start":{"line":3,"column":259},"end":{"line":3,"column":286}},"8":{"start":{"line":3,"column":287},"end":{"line":3,"column":345}},"9":{"start":{"line":3,"column":350},"end":{"line":3,"column":559}},"10":{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},"11":{"start":{"line":3,"column":423},"end":{"line":3,"column":475}},"12":{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},"13":{"start":{"line":3,"column":493},"end":{"line":3,"column":536}},"14":{"start":{"line":3,"column":537},"end":{"line":3,"column":556}},"15":{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},"16":{"start":{"line":5,"column":92},"end":{"line":5,"column":149}},"17":{"start":{"line":7,"column":0},"end":{"line":7,"column":13}},"18":{"start":{"line":12,"column":0},"end":{"line":72,"column":2}},"19":{"start":{"line":13,"column":23},"end":{"line":13,"column":41}},"20":{"start":{"line":14,"column":21},"end":{"line":14,"column":36}},"21":{"start":{"line":16,"column":8},"end":{"line":71,"column":12}},"22":{"start":{"line":18,"column":24},"end":{"line":18,"column":58}},"23":{"start":{"line":20,"column":24},"end":{"line":20,"column":43}},"24":{"start":{"line":23,"column":16},"end":{"line":68,"column":20}},"25":{"start":{"line":27,"column":32},"end":{"line":27,"column":79}},"26":{"start":{"line":28,"column":32},"end":{"line":28,"column":82}},"27":{"start":{"line":29,"column":32},"end":{"line":29,"column":106}},"28":{"start":{"line":30,"column":32},"end":{"line":30,"column":154}},"29":{"start":{"line":31,"column":32},"end":{"line":31,"column":85}},"30":{"start":{"line":31,"column":48},"end":{"line":31,"column":85}},"31":{"start":{"line":32,"column":32},"end":{"line":32,"column":46}},"32":{"start":{"line":39,"column":32},"end":{"line":39,"column":74}},"33":{"start":{"line":70,"column":16},"end":{"line":70,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":19},"end":{"line":3,"column":20}},"loc":{"start":{"line":3,"column":31},"end":{"line":3,"column":561}},"line":3},"1":{"name":"defineProperties","decl":{"start":{"line":3,"column":42},"end":{"line":3,"column":58}},"loc":{"start":{"line":3,"column":74},"end":{"line":3,"column":349}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":357},"end":{"line":3,"column":358}},"loc":{"start":{"line":3,"column":405},"end":{"line":3,"column":558}},"line":3},"3":{"name":"_classCallCheck","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":24}},"loc":{"start":{"line":5,"column":48},"end":{"line":5,"column":153}},"line":5},"4":{"name":"(anonymous_4)","decl":{"start":{"line":12,"column":17},"end":{"line":12,"column":18}},"loc":{"start":{"line":12,"column":39},"end":{"line":72,"column":1}},"line":12},"5":{"name":"(anonymous_5)","decl":{"start":{"line":16,"column":15},"end":{"line":16,"column":16}},"loc":{"start":{"line":16,"column":27},"end":{"line":71,"column":9}},"line":16},"6":{"name":"ServerAuth","decl":{"start":{"line":17,"column":25},"end":{"line":17,"column":35}},"loc":{"start":{"line":17,"column":43},"end":{"line":21,"column":17}},"line":17},"7":{"name":"authCheck","decl":{"start":{"line":25,"column":40},"end":{"line":25,"column":49}},"loc":{"start":{"line":25,"column":66},"end":{"line":35,"column":25}},"line":25},"8":{"name":"AppUseAuth","decl":{"start":{"line":38,"column":40},"end":{"line":38,"column":50}},"loc":{"start":{"line":38,"column":53},"end":{"line":40,"column":25}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":168},"end":{"line":3,"column":198}},"type":"binary-expr","locations":[{"start":{"line":3,"column":168},"end":{"line":3,"column":189}},{"start":{"line":3,"column":193},"end":{"line":3,"column":198}}],"line":3},"1":{"loc":{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},"type":"if","locations":[{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},{"start":{"line":3,"column":232},"end":{"line":3,"column":286}}],"line":3},"2":{"loc":{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},"type":"if","locations":[{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},{"start":{"line":3,"column":407},"end":{"line":3,"column":475}}],"line":3},"3":{"loc":{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},"type":"if","locations":[{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},{"start":{"line":3,"column":476},"end":{"line":3,"column":536}}],"line":3},"4":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},"type":"if","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},{"start":{"line":5,"column":50},"end":{"line":5,"column":151}}],"line":5},"5":{"loc":{"start":{"line":31,"column":32},"end":{"line":31,"column":85}},"type":"if","locations":[{"start":{"line":31,"column":32},"end":{"line":31,"column":85}},{"start":{"line":31,"column":32},"end":{"line":31,"column":85}}],"line":31}},"s":{"0":1,"1":1,"2":1,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":1,"10":1,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":10,"26":10,"27":10,"28":10,"29":10,"30":0,"31":10,"32":1,"33":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":10,"8":1},"b":{"0":[2,2],"1":[2,0],"2":[1,0],"3":[0,1],"4":[0,1],"5":[0,10]},"inputSourceMap":{"version":3,"sources":["auth.js"],"names":["module","exports","expressApp","require","notify","debug","req","res","next","header","url","use","authCheck","bind"],"mappings":";;;;;;AAAA;;AAEA;;;AAGAA,OAAOC,OAAP,GAAiB,UAAUC,UAAV,EAAsB;AAAA,uBAChBC,QAAQ,SAAR,CADgB;AAAA,YAC3BC,MAD2B,YAC3BA,MAD2B;;AAEnC;AACI,oCAAYC,KAAZ,EAAmB;AAAA;;AACf,6BAAKA,KAAL,GAAaA,KAAb;AACH;;AAHL;AAAA;AAAA,kDAKcC,GALd,EAKmBC,GALnB,EAKwBC,IALxB,EAK8B;;AAEtBD,oCAAIE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,oCAAIE,MAAJ,CAAW,8BAAX,EAA2C,KAA3C;AACAF,oCAAIE,MAAJ,CAAW,8BAAX,EAA2C,6BAA3C;AACAF,oCAAIE,MAAJ,CAAW,8BAAX,EAA2C,6EAA3C;AACA,oCAAI,KAAKJ,KAAT,EAAgBD,4BAA0BE,IAAII,GAA9B;AAChB,uCAAOF,MAAP;AACA;AACA;AAEH;AAhBL;AAAA;AAAA,qDAkBiB;AACTN,2CAAWS,GAAX,CAAe,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAf;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA9CJ;;AAAA;AAAA;AAiDH,CAnDD","file":"auth.js","sourceRoot":"X:/workflow/open-projects/ics-calendar/libs/server","sourcesContent":["`use strict`\r\n\r\n/**\r\n * - ServerAuth extention\r\n */\r\nmodule.exports = function (expressApp) {\r\n    const { notify } = require('x-units')\r\n    return class ServerAuth {\r\n        constructor(debug) {\r\n            this.debug = debug\r\n        }\r\n\r\n        authCheck(req, res, next) {\r\n\r\n            res.header('Access-Control-Allow-Origin', '*')\r\n            res.header('Access-Control-Allow-Methods', 'GET')\r\n            res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization')\r\n            res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept, Authorization, token-expiry')\r\n            if (this.debug) notify(`-- calling url: ${req.url}`)\r\n            return next()\r\n            // providing no restrictions apart from the header\r\n            // return res.status(400).send({ error: true, msg: 'No token provided, or session expired' });\r\n\r\n        }\r\n\r\n        AppUseAuth() {\r\n            expressApp.use(this.authCheck.bind(this))\r\n        }\r\n\r\n        // SECTION disabled, not in play\r\n        // verifyAccess(req, token, cb){\r\n        //     jwt.verify(token, config.secret, function (err, decoded) {\r\n        //         if (err) {\r\n        //             console.log('There was an error with the authentication');\r\n        //             cb(false)\r\n        //         } else {\r\n        //             req.token = decoded //[1]\r\n        //             cb(true)\r\n        //         }\r\n        //     })\r\n        // }\r\n        // getToken(headers) {\r\n        //     if (headers && headers.authorization) {\r\n        //         var parted = headers.authorization.split(' ');\r\n        //         if (parted.length === 2) {\r\n        //             return parted[1];\r\n        //         } else {\r\n        //             return null;\r\n        //         }\r\n        //     } else {\r\n        //         return null;\r\n        //     }\r\n        // };\r\n        // !SECTION \r\n\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"34dccecd93b56004201f9b2cd69f76f31b35eef4","contentHash":"3d7f8443a7d8f85eaca9397c158db64c068a265d49111aec69214e96059904a3"},"X:\\workflow\\open-projects\\ics-calendar\\libs\\server\\controllers.js":{"path":"X:\\workflow\\open-projects\\ics-calendar\\libs\\server\\controllers.js","statementMap":{"0":{"start":{"line":3,"column":19},"end":{"line":3,"column":563}},"1":{"start":{"line":3,"column":76},"end":{"line":3,"column":347}},"2":{"start":{"line":3,"column":89},"end":{"line":3,"column":90}},"3":{"start":{"line":3,"column":134},"end":{"line":3,"column":142}},"4":{"start":{"line":3,"column":144},"end":{"line":3,"column":199}},"5":{"start":{"line":3,"column":200},"end":{"line":3,"column":231}},"6":{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},"7":{"start":{"line":3,"column":259},"end":{"line":3,"column":286}},"8":{"start":{"line":3,"column":287},"end":{"line":3,"column":345}},"9":{"start":{"line":3,"column":350},"end":{"line":3,"column":559}},"10":{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},"11":{"start":{"line":3,"column":423},"end":{"line":3,"column":475}},"12":{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},"13":{"start":{"line":3,"column":493},"end":{"line":3,"column":536}},"14":{"start":{"line":3,"column":537},"end":{"line":3,"column":556}},"15":{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},"16":{"start":{"line":5,"column":92},"end":{"line":5,"column":149}},"17":{"start":{"line":7,"column":0},"end":{"line":7,"column":13}},"18":{"start":{"line":9,"column":0},"end":{"line":113,"column":2}},"19":{"start":{"line":10,"column":19},"end":{"line":10,"column":37}},"20":{"start":{"line":11,"column":19},"end":{"line":11,"column":36}},"21":{"start":{"line":12,"column":17},"end":{"line":12,"column":32}},"22":{"start":{"line":13,"column":21},"end":{"line":13,"column":40}},"23":{"start":{"line":14,"column":15},"end":{"line":14,"column":28}},"24":{"start":{"line":16,"column":4},"end":{"line":112,"column":8}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":52}},"26":{"start":{"line":20,"column":12},"end":{"line":20,"column":39}},"27":{"start":{"line":21,"column":12},"end":{"line":21,"column":36}},"28":{"start":{"line":22,"column":12},"end":{"line":28,"column":13}},"29":{"start":{"line":23,"column":26},"end":{"line":23,"column":56}},"30":{"start":{"line":24,"column":16},"end":{"line":24,"column":51}},"31":{"start":{"line":26,"column":16},"end":{"line":26,"column":44}},"32":{"start":{"line":27,"column":16},"end":{"line":27,"column":41}},"33":{"start":{"line":37,"column":8},"end":{"line":109,"column":12}},"34":{"start":{"line":40,"column":16},"end":{"line":40,"column":111}},"35":{"start":{"line":40,"column":38},"end":{"line":40,"column":111}},"36":{"start":{"line":42,"column":33},"end":{"line":44,"column":25}},"37":{"start":{"line":43,"column":20},"end":{"line":43,"column":49}},"38":{"start":{"line":45,"column":16},"end":{"line":45,"column":120}},"39":{"start":{"line":45,"column":33},"end":{"line":45,"column":120}},"40":{"start":{"line":46,"column":27},"end":{"line":46,"column":42}},"41":{"start":{"line":47,"column":29},"end":{"line":47,"column":54}},"42":{"start":{"line":48,"column":16},"end":{"line":48,"column":142}},"43":{"start":{"line":48,"column":53},"end":{"line":48,"column":142}},"44":{"start":{"line":50,"column":16},"end":{"line":54,"column":19}},"45":{"start":{"line":51,"column":34},"end":{"line":51,"column":40}},"46":{"start":{"line":52,"column":20},"end":{"line":52,"column":112}},"47":{"start":{"line":52,"column":34},"end":{"line":52,"column":67}},"48":{"start":{"line":52,"column":72},"end":{"line":52,"column":112}},"49":{"start":{"line":53,"column":20},"end":{"line":53,"column":102}},"50":{"start":{"line":67,"column":28},"end":{"line":67,"column":32}},"51":{"start":{"line":69,"column":16},"end":{"line":69,"column":111}},"52":{"start":{"line":69,"column":38},"end":{"line":69,"column":111}},"53":{"start":{"line":71,"column":32},"end":{"line":71,"column":57}},"54":{"start":{"line":72,"column":28},"end":{"line":72,"column":68}},"55":{"start":{"line":74,"column":16},"end":{"line":86,"column":17}},"56":{"start":{"line":75,"column":40},"end":{"line":75,"column":44}},"57":{"start":{"line":76,"column":20},"end":{"line":85,"column":23}},"58":{"start":{"line":77,"column":32},"end":{"line":77,"column":78}},"59":{"start":{"line":78,"column":39},"end":{"line":81,"column":26}},"60":{"start":{"line":79,"column":28},"end":{"line":79,"column":133}},"61":{"start":{"line":79,"column":64},"end":{"line":79,"column":133}},"62":{"start":{"line":80,"column":28},"end":{"line":80,"column":40}},"63":{"start":{"line":82,"column":24},"end":{"line":82,"column":102}},"64":{"start":{"line":84,"column":24},"end":{"line":84,"column":90}},"65":{"start":{"line":86,"column":17},"end":{"line":107,"column":115}},"66":{"start":{"line":88,"column":38},"end":{"line":88,"column":61}},"67":{"start":{"line":89,"column":20},"end":{"line":89,"column":68}},"68":{"start":{"line":89,"column":47},"end":{"line":89,"column":68}},"69":{"start":{"line":91,"column":20},"end":{"line":106,"column":23}},"70":{"start":{"line":92,"column":32},"end":{"line":92,"column":79}},"71":{"start":{"line":93,"column":39},"end":{"line":102,"column":26}},"72":{"start":{"line":94,"column":28},"end":{"line":100,"column":29}},"73":{"start":{"line":95,"column":32},"end":{"line":99,"column":35}},"74":{"start":{"line":97,"column":36},"end":{"line":97,"column":101}},"75":{"start":{"line":97,"column":48},"end":{"line":97,"column":101}},"76":{"start":{"line":98,"column":36},"end":{"line":98,"column":45}},"77":{"start":{"line":101,"column":28},"end":{"line":101,"column":40}},"78":{"start":{"line":103,"column":24},"end":{"line":103,"column":102}},"79":{"start":{"line":105,"column":24},"end":{"line":105,"column":97}},"80":{"start":{"line":107,"column":23},"end":{"line":107,"column":115}},"81":{"start":{"line":111,"column":8},"end":{"line":111,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":19},"end":{"line":3,"column":20}},"loc":{"start":{"line":3,"column":31},"end":{"line":3,"column":561}},"line":3},"1":{"name":"defineProperties","decl":{"start":{"line":3,"column":42},"end":{"line":3,"column":58}},"loc":{"start":{"line":3,"column":74},"end":{"line":3,"column":349}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":357},"end":{"line":3,"column":358}},"loc":{"start":{"line":3,"column":405},"end":{"line":3,"column":558}},"line":3},"3":{"name":"_classCallCheck","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":24}},"loc":{"start":{"line":5,"column":48},"end":{"line":5,"column":153}},"line":5},"4":{"name":"(anonymous_4)","decl":{"start":{"line":9,"column":17},"end":{"line":9,"column":18}},"loc":{"start":{"line":9,"column":39},"end":{"line":113,"column":1}},"line":9},"5":{"name":"(anonymous_5)","decl":{"start":{"line":16,"column":11},"end":{"line":16,"column":12}},"loc":{"start":{"line":16,"column":23},"end":{"line":112,"column":5}},"line":16},"6":{"name":"ServerController","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":33}},"loc":{"start":{"line":17,"column":41},"end":{"line":29,"column":9}},"line":17},"7":{"name":"calendar","decl":{"start":{"line":39,"column":28},"end":{"line":39,"column":36}},"loc":{"start":{"line":39,"column":47},"end":{"line":55,"column":13}},"line":39},"8":{"name":"(anonymous_8)","decl":{"start":{"line":42,"column":71},"end":{"line":42,"column":72}},"loc":{"start":{"line":42,"column":84},"end":{"line":44,"column":17}},"line":42},"9":{"name":"(anonymous_9)","decl":{"start":{"line":50,"column":74},"end":{"line":50,"column":75}},"loc":{"start":{"line":50,"column":87},"end":{"line":54,"column":17}},"line":50},"10":{"name":"database","decl":{"start":{"line":66,"column":28},"end":{"line":66,"column":36}},"loc":{"start":{"line":66,"column":47},"end":{"line":108,"column":13}},"line":66},"11":{"name":"(anonymous_11)","decl":{"start":{"line":76,"column":27},"end":{"line":76,"column":28}},"loc":{"start":{"line":76,"column":45},"end":{"line":83,"column":21}},"line":76},"12":{"name":"(anonymous_12)","decl":{"start":{"line":78,"column":51},"end":{"line":78,"column":52}},"loc":{"start":{"line":78,"column":67},"end":{"line":81,"column":25}},"line":78},"13":{"name":"(anonymous_13)","decl":{"start":{"line":83,"column":30},"end":{"line":83,"column":31}},"loc":{"start":{"line":83,"column":47},"end":{"line":85,"column":21}},"line":83},"14":{"name":"(anonymous_14)","decl":{"start":{"line":91,"column":27},"end":{"line":91,"column":28}},"loc":{"start":{"line":91,"column":45},"end":{"line":104,"column":21}},"line":91},"15":{"name":"(anonymous_15)","decl":{"start":{"line":93,"column":51},"end":{"line":93,"column":52}},"loc":{"start":{"line":93,"column":67},"end":{"line":102,"column":25}},"line":93},"16":{"name":"(anonymous_16)","decl":{"start":{"line":95,"column":72},"end":{"line":95,"column":73}},"loc":{"start":{"line":95,"column":85},"end":{"line":99,"column":33}},"line":95},"17":{"name":"(anonymous_17)","decl":{"start":{"line":104,"column":30},"end":{"line":104,"column":31}},"loc":{"start":{"line":104,"column":47},"end":{"line":106,"column":21}},"line":104}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":168},"end":{"line":3,"column":198}},"type":"binary-expr","locations":[{"start":{"line":3,"column":168},"end":{"line":3,"column":189}},{"start":{"line":3,"column":193},"end":{"line":3,"column":198}}],"line":3},"1":{"loc":{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},"type":"if","locations":[{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},{"start":{"line":3,"column":232},"end":{"line":3,"column":286}}],"line":3},"2":{"loc":{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},"type":"if","locations":[{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},{"start":{"line":3,"column":407},"end":{"line":3,"column":475}}],"line":3},"3":{"loc":{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},"type":"if","locations":[{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},{"start":{"line":3,"column":476},"end":{"line":3,"column":536}}],"line":3},"4":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},"type":"if","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},{"start":{"line":5,"column":50},"end":{"line":5,"column":151}}],"line":5},"5":{"loc":{"start":{"line":20,"column":25},"end":{"line":20,"column":38}},"type":"binary-expr","locations":[{"start":{"line":20,"column":25},"end":{"line":20,"column":30}},{"start":{"line":20,"column":34},"end":{"line":20,"column":38}}],"line":20},"6":{"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":111}},"type":"if","locations":[{"start":{"line":40,"column":16},"end":{"line":40,"column":111}},{"start":{"line":40,"column":16},"end":{"line":40,"column":111}}],"line":40},"7":{"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":120}},"type":"if","locations":[{"start":{"line":45,"column":16},"end":{"line":45,"column":120}},{"start":{"line":45,"column":16},"end":{"line":45,"column":120}}],"line":45},"8":{"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":142}},"type":"if","locations":[{"start":{"line":48,"column":16},"end":{"line":48,"column":142}},{"start":{"line":48,"column":16},"end":{"line":48,"column":142}}],"line":48},"9":{"loc":{"start":{"line":48,"column":20},"end":{"line":48,"column":51}},"type":"binary-expr","locations":[{"start":{"line":48,"column":20},"end":{"line":48,"column":37}},{"start":{"line":48,"column":41},"end":{"line":48,"column":51}}],"line":48},"10":{"loc":{"start":{"line":52,"column":20},"end":{"line":52,"column":112}},"type":"if","locations":[{"start":{"line":52,"column":20},"end":{"line":52,"column":112}},{"start":{"line":52,"column":20},"end":{"line":52,"column":112}}],"line":52},"11":{"loc":{"start":{"line":69,"column":16},"end":{"line":69,"column":111}},"type":"if","locations":[{"start":{"line":69,"column":16},"end":{"line":69,"column":111}},{"start":{"line":69,"column":16},"end":{"line":69,"column":111}}],"line":69},"12":{"loc":{"start":{"line":71,"column":32},"end":{"line":71,"column":57}},"type":"binary-expr","locations":[{"start":{"line":71,"column":32},"end":{"line":71,"column":51}},{"start":{"line":71,"column":55},"end":{"line":71,"column":57}}],"line":71},"13":{"loc":{"start":{"line":72,"column":28},"end":{"line":72,"column":68}},"type":"cond-expr","locations":[{"start":{"line":72,"column":52},"end":{"line":72,"column":61}},{"start":{"line":72,"column":64},"end":{"line":72,"column":68}}],"line":72},"14":{"loc":{"start":{"line":74,"column":16},"end":{"line":86,"column":17}},"type":"if","locations":[{"start":{"line":74,"column":16},"end":{"line":86,"column":17}},{"start":{"line":74,"column":16},"end":{"line":86,"column":17}}],"line":74},"15":{"loc":{"start":{"line":79,"column":28},"end":{"line":79,"column":133}},"type":"if","locations":[{"start":{"line":79,"column":28},"end":{"line":79,"column":133}},{"start":{"line":79,"column":28},"end":{"line":79,"column":133}}],"line":79},"16":{"loc":{"start":{"line":79,"column":32},"end":{"line":79,"column":62}},"type":"binary-expr","locations":[{"start":{"line":79,"column":32},"end":{"line":79,"column":44}},{"start":{"line":79,"column":48},"end":{"line":79,"column":62}}],"line":79},"17":{"loc":{"start":{"line":86,"column":17},"end":{"line":107,"column":115}},"type":"if","locations":[{"start":{"line":86,"column":17},"end":{"line":107,"column":115}},{"start":{"line":86,"column":17},"end":{"line":107,"column":115}}],"line":86},"18":{"loc":{"start":{"line":88,"column":41},"end":{"line":88,"column":52}},"type":"binary-expr","locations":[{"start":{"line":88,"column":41},"end":{"line":88,"column":46}},{"start":{"line":88,"column":50},"end":{"line":88,"column":52}}],"line":88},"19":{"loc":{"start":{"line":89,"column":20},"end":{"line":89,"column":68}},"type":"if","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":68}},{"start":{"line":89,"column":20},"end":{"line":89,"column":68}}],"line":89},"20":{"loc":{"start":{"line":89,"column":25},"end":{"line":89,"column":36}},"type":"binary-expr","locations":[{"start":{"line":89,"column":25},"end":{"line":89,"column":30}},{"start":{"line":89,"column":34},"end":{"line":89,"column":36}}],"line":89},"21":{"loc":{"start":{"line":94,"column":28},"end":{"line":100,"column":29}},"type":"if","locations":[{"start":{"line":94,"column":28},"end":{"line":100,"column":29}},{"start":{"line":94,"column":28},"end":{"line":100,"column":29}}],"line":94},"22":{"loc":{"start":{"line":97,"column":36},"end":{"line":97,"column":101}},"type":"if","locations":[{"start":{"line":97,"column":36},"end":{"line":97,"column":101}},{"start":{"line":97,"column":36},"end":{"line":97,"column":101}}],"line":97}},"s":{"0":1,"1":1,"2":1,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":1,"10":1,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":9,"51":9,"52":0,"53":9,"54":9,"55":9,"56":5,"57":5,"58":5,"59":5,"60":148,"61":148,"62":148,"63":5,"64":0,"65":4,"66":4,"67":4,"68":2,"69":4,"70":4,"71":4,"72":22,"73":11,"74":51,"75":51,"76":51,"77":22,"78":4,"79":0,"80":0,"81":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":9,"11":5,"12":148,"13":0,"14":4,"15":22,"16":51,"17":0},"b":{"0":[2,2],"1":[2,0],"2":[1,0],"3":[0,1],"4":[0,1],"5":[1,1],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,9],"12":[9,0],"13":[6,3],"14":[5,4],"15":[148,0],"16":[148,148],"17":[4,0],"18":[4,1],"19":[2,2],"20":[4,1],"21":[11,11],"22":[51,0]},"inputSourceMap":{"version":3,"sources":["controllers.js"],"names":["module","exports","expressApp","require","isNumber","notify","objectSize","copy","debug","serverError","ICS","ics","error","req","res","status","json","message","code","validTypes","availableAbsenceTypes","filter","z","params","type","length","response","userId","Number","generateICS","then","success","_document","document","query","includeMember","r","absences","map","item","typeSetMessage","member","name","catch","showAbsence","absence","members"],"mappings":"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","file":"controllers.js","sourceRoot":"X:/workflow/open-projects/ics-calendar/libs/server","sourcesContent":["`use strict`\r\n\r\nmodule.exports = function (expressApp) {\r\n    const { isNumber, notify, objectSize, copy } = require('x-units')\r\n    return class ServerController {\r\n        constructor(debug) {\r\n\r\n            this.debug = debug || null\r\n            this.serverError = null\r\n            try {\r\n                const ICS = require('../ics/ics.module')()\r\n                this.ics = new ICS({}, this.debug)\r\n            } catch (error) {\r\n                notify({ error }, 1)\r\n                this.serverError = error\r\n            }\r\n        }\r\n\r\n        /**\r\n         * (GET) REST/api\r\n         * - produce calendar with valid params `./:type/:userId`\r\n         */\r\n        calendar(req, res) {\r\n            if (this.serverError) return res.status(500).json({ message: 'ICS databse error', code: 500 })\r\n            \r\n            const validTypes = this.ics.availableAbsenceTypes.filter(z => z === req.params.type).length\r\n            if (!validTypes) return res.status(200).json({ error: 'wrong type provided', response: {}, code: 200 })\r\n            const type = req.params.type\r\n            const userId = Number(req.params.userId)    \r\n            if (!isNumber(userId) || userId < 0) return res.status(200).json({ error: 'wrong userId provided', response: {}, code: 200 })\r\n\r\n            return this.ics.generateICS(type, userId, 'members').then(z => {\r\n                let message\r\n                if (z.length) message = '.ics files generated'\r\n                else message = 'no match for provided query'\r\n                res.status(200).json({ success: true, response: z, message, code: 200 })\r\n            })\r\n        }\r\n\r\n        /**\r\n        * (GET) REST/api \r\n        *  end points: `/database/:document` >> `/database/members` or `/database/absences` will list document items\r\n        *  deep queries: `/database/members?absence=1` assign absences list\r\n        *  ?userId ?startDate ?endDate can be called to deepend your query\r\n        */\r\n        database(req, res) {\r\n\r\n            if (this.serverError) return res.status(500).json({ message: 'ICS databse error', code: 500 })\r\n\r\n            const _document = req.params.document || ''\r\n            const query = objectSize(req.query) ? req.query : null\r\n\r\n            if (_document === 'absences') {\r\n                const includeMember = true\r\n                return (async() => {\r\n                    const r = await this.ics.absences(query, includeMember)\r\n                    const response = copy(r).map(item => {\r\n                        if (item['type'] && item['member']) item['type'] = this.ics.typeSetMessage(item.member.name, item.type)\r\n                        return item\r\n                    })\r\n                    return res.status(200).json({ success: true, response, code: 200 })\r\n                })().catch(error => {\r\n                    res.status(404).json({ error, response: null, code: 404 })\r\n                })\r\n\r\n            } if (_document === 'members') {\r\n                // response assigns absences array when showAbsence=true\r\n                const showAbsence = !!(query || {}).absence\r\n                if ((query || {}).absence) delete query.absence\r\n               \r\n                return (async () => {\r\n                    const r = await this.ics.members(query, [], showAbsence)\r\n                    const response = copy(r).map(item => {\r\n                        if (showAbsence) {\r\n                            item['absences'] = item['absences'].map((z) => {\r\n                                // update message\r\n                                if (z.type) z.type = this.ics.typeSetMessage(item.name, z.type)\r\n                                return z\r\n                            })\r\n                        }\r\n                        return item\r\n                    })          \r\n                    return res.status(200).json({ success: true, response, code: 200 })\r\n                })().catch(error => {\r\n                    return res.status(404).json({ error, response: null, code: 404 })\r\n                })\r\n\r\n            } else return res.status(500).json({ message: `document ${_document} not found`, code: 500 })\r\n        }\r\n    }\r\n\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3fe434b34cc319eae41d1364ca3e4ce22a8358c3","contentHash":"19a87d013baf63fea9bd2f527809a4af904f4abe63a9a2ea2c657f68058bad06"},"X:\\workflow\\open-projects\\ics-calendar\\libs\\ics\\ics.module.js":{"path":"X:\\workflow\\open-projects\\ics-calendar\\libs\\ics\\ics.module.js","statementMap":{"0":{"start":{"line":3,"column":19},"end":{"line":3,"column":563}},"1":{"start":{"line":3,"column":76},"end":{"line":3,"column":347}},"2":{"start":{"line":3,"column":89},"end":{"line":3,"column":90}},"3":{"start":{"line":3,"column":134},"end":{"line":3,"column":142}},"4":{"start":{"line":3,"column":144},"end":{"line":3,"column":199}},"5":{"start":{"line":3,"column":200},"end":{"line":3,"column":231}},"6":{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},"7":{"start":{"line":3,"column":259},"end":{"line":3,"column":286}},"8":{"start":{"line":3,"column":287},"end":{"line":3,"column":345}},"9":{"start":{"line":3,"column":350},"end":{"line":3,"column":559}},"10":{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},"11":{"start":{"line":3,"column":423},"end":{"line":3,"column":475}},"12":{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},"13":{"start":{"line":3,"column":493},"end":{"line":3,"column":536}},"14":{"start":{"line":3,"column":537},"end":{"line":3,"column":556}},"15":{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},"16":{"start":{"line":5,"column":92},"end":{"line":5,"column":149}},"17":{"start":{"line":7,"column":0},"end":{"line":7,"column":13}},"18":{"start":{"line":16,"column":0},"end":{"line":207,"column":2}},"19":{"start":{"line":17,"column":14},"end":{"line":17,"column":48}},"20":{"start":{"line":19,"column":19},"end":{"line":19,"column":37}},"21":{"start":{"line":20,"column":17},"end":{"line":20,"column":32}},"22":{"start":{"line":21,"column":19},"end":{"line":21,"column":36}},"23":{"start":{"line":22,"column":18},"end":{"line":22,"column":34}},"24":{"start":{"line":23,"column":15},"end":{"line":23,"column":28}},"25":{"start":{"line":25,"column":20},"end":{"line":203,"column":7}},"26":{"start":{"line":28,"column":23},"end":{"line":28,"column":93}},"27":{"start":{"line":29,"column":24},"end":{"line":29,"column":36}},"28":{"start":{"line":31,"column":12},"end":{"line":31,"column":45}},"29":{"start":{"line":33,"column":12},"end":{"line":33,"column":31}},"30":{"start":{"line":34,"column":12},"end":{"line":34,"column":26}},"31":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"32":{"start":{"line":47,"column":8},"end":{"line":200,"column":12}},"33":{"start":{"line":50,"column":27},"end":{"line":50,"column":105}},"34":{"start":{"line":51,"column":26},"end":{"line":51,"column":98}},"35":{"start":{"line":52,"column":29},"end":{"line":52,"column":106}},"36":{"start":{"line":55,"column":16},"end":{"line":58,"column":17}},"37":{"start":{"line":56,"column":20},"end":{"line":56,"column":82}},"38":{"start":{"line":56,"column":36},"end":{"line":56,"column":82}},"39":{"start":{"line":57,"column":20},"end":{"line":57,"column":30}},"40":{"start":{"line":60,"column":16},"end":{"line":63,"column":17}},"41":{"start":{"line":61,"column":20},"end":{"line":61,"column":76}},"42":{"start":{"line":61,"column":36},"end":{"line":61,"column":76}},"43":{"start":{"line":62,"column":20},"end":{"line":62,"column":30}},"44":{"start":{"line":65,"column":16},"end":{"line":68,"column":17}},"45":{"start":{"line":66,"column":20},"end":{"line":66,"column":83}},"46":{"start":{"line":66,"column":36},"end":{"line":66,"column":83}},"47":{"start":{"line":67,"column":20},"end":{"line":67,"column":30}},"48":{"start":{"line":70,"column":33},"end":{"line":70,"column":35}},"49":{"start":{"line":71,"column":16},"end":{"line":111,"column":17}},"50":{"start":{"line":75,"column":28},"end":{"line":104,"column":29}},"51":{"start":{"line":76,"column":49},"end":{"line":76,"column":84}},"52":{"start":{"line":77,"column":32},"end":{"line":77,"column":104}},"53":{"start":{"line":77,"column":56},"end":{"line":77,"column":104}},"54":{"start":{"line":78,"column":32},"end":{"line":80,"column":33}},"55":{"start":{"line":79,"column":36},"end":{"line":79,"column":155}},"56":{"start":{"line":79,"column":52},"end":{"line":79,"column":155}},"57":{"start":{"line":82,"column":43},"end":{"line":82,"column":59}},"58":{"start":{"line":83,"column":32},"end":{"line":85,"column":33}},"59":{"start":{"line":84,"column":36},"end":{"line":84,"column":42}},"60":{"start":{"line":87,"column":45},"end":{"line":87,"column":56}},"61":{"start":{"line":89,"column":55},"end":{"line":89,"column":130}},"62":{"start":{"line":92,"column":48},"end":{"line":92,"column":87}},"63":{"start":{"line":94,"column":32},"end":{"line":101,"column":35}},"64":{"start":{"line":96,"column":36},"end":{"line":100,"column":39}},"65":{"start":{"line":97,"column":53},"end":{"line":97,"column":94}},"66":{"start":{"line":98,"column":40},"end":{"line":98,"column":80}},"67":{"start":{"line":98,"column":53},"end":{"line":98,"column":80}},"68":{"start":{"line":99,"column":40},"end":{"line":99,"column":79}},"69":{"start":{"line":99,"column":54},"end":{"line":99,"column":79}},"70":{"start":{"line":103,"column":32},"end":{"line":103,"column":60}},"71":{"start":{"line":106,"column":28},"end":{"line":106,"column":34}},"72":{"start":{"line":110,"column":24},"end":{"line":110,"column":106}},"73":{"start":{"line":113,"column":16},"end":{"line":113,"column":34}},"74":{"start":{"line":127,"column":28},"end":{"line":127,"column":100}},"75":{"start":{"line":128,"column":36},"end":{"line":128,"column":108}},"76":{"start":{"line":129,"column":36},"end":{"line":129,"column":106}},"77":{"start":{"line":131,"column":16},"end":{"line":131,"column":30}},"78":{"start":{"line":132,"column":27},"end":{"line":132,"column":29}},"79":{"start":{"line":133,"column":16},"end":{"line":138,"column":17}},"80":{"start":{"line":134,"column":20},"end":{"line":134,"column":55}},"81":{"start":{"line":136,"column":20},"end":{"line":136,"column":75}},"82":{"start":{"line":136,"column":36},"end":{"line":136,"column":75}},"83":{"start":{"line":137,"column":20},"end":{"line":137,"column":59}},"84":{"start":{"line":142,"column":16},"end":{"line":158,"column":17}},"85":{"start":{"line":143,"column":20},"end":{"line":153,"column":21}},"86":{"start":{"line":144,"column":37},"end":{"line":144,"column":71}},"87":{"start":{"line":145,"column":24},"end":{"line":145,"column":81}},"88":{"start":{"line":145,"column":58},"end":{"line":145,"column":81}},"89":{"start":{"line":147,"column":39},"end":{"line":147,"column":118}},"90":{"start":{"line":149,"column":24},"end":{"line":149,"column":53}},"91":{"start":{"line":151,"column":24},"end":{"line":151,"column":52}},"92":{"start":{"line":152,"column":24},"end":{"line":152,"column":34}},"93":{"start":{"line":155,"column":20},"end":{"line":155,"column":34}},"94":{"start":{"line":157,"column":20},"end":{"line":157,"column":75}},"95":{"start":{"line":171,"column":28},"end":{"line":171,"column":100}},"96":{"start":{"line":172,"column":36},"end":{"line":172,"column":106}},"97":{"start":{"line":173,"column":34},"end":{"line":173,"column":106}},"98":{"start":{"line":175,"column":16},"end":{"line":175,"column":30}},"99":{"start":{"line":176,"column":27},"end":{"line":176,"column":29}},"100":{"start":{"line":177,"column":16},"end":{"line":182,"column":17}},"101":{"start":{"line":178,"column":20},"end":{"line":178,"column":54}},"102":{"start":{"line":180,"column":20},"end":{"line":180,"column":74}},"103":{"start":{"line":180,"column":36},"end":{"line":180,"column":74}},"104":{"start":{"line":181,"column":20},"end":{"line":181,"column":60}},"105":{"start":{"line":183,"column":16},"end":{"line":198,"column":17}},"106":{"start":{"line":184,"column":20},"end":{"line":194,"column":21}},"107":{"start":{"line":185,"column":37},"end":{"line":185,"column":47}},"108":{"start":{"line":186,"column":24},"end":{"line":186,"column":81}},"109":{"start":{"line":186,"column":58},"end":{"line":186,"column":81}},"110":{"start":{"line":188,"column":39},"end":{"line":188,"column":117}},"111":{"start":{"line":190,"column":24},"end":{"line":190,"column":53}},"112":{"start":{"line":192,"column":24},"end":{"line":192,"column":52}},"113":{"start":{"line":193,"column":24},"end":{"line":193,"column":34}},"114":{"start":{"line":196,"column":20},"end":{"line":196,"column":34}},"115":{"start":{"line":197,"column":20},"end":{"line":197,"column":75}},"116":{"start":{"line":202,"column":8},"end":{"line":202,"column":25}},"117":{"start":{"line":205,"column":17},"end":{"line":205,"column":49}},"118":{"start":{"line":206,"column":4},"end":{"line":206,"column":18}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":19},"end":{"line":3,"column":20}},"loc":{"start":{"line":3,"column":31},"end":{"line":3,"column":561}},"line":3},"1":{"name":"defineProperties","decl":{"start":{"line":3,"column":42},"end":{"line":3,"column":58}},"loc":{"start":{"line":3,"column":74},"end":{"line":3,"column":349}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":357},"end":{"line":3,"column":358}},"loc":{"start":{"line":3,"column":405},"end":{"line":3,"column":558}},"line":3},"3":{"name":"_classCallCheck","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":24}},"loc":{"start":{"line":5,"column":48},"end":{"line":5,"column":153}},"line":5},"4":{"name":"(anonymous_4)","decl":{"start":{"line":16,"column":17},"end":{"line":16,"column":18}},"loc":{"start":{"line":16,"column":29},"end":{"line":207,"column":1}},"line":16},"5":{"name":"(anonymous_5)","decl":{"start":{"line":25,"column":20},"end":{"line":25,"column":21}},"loc":{"start":{"line":25,"column":32},"end":{"line":203,"column":5}},"line":25},"6":{"name":"ICSmodule","decl":{"start":{"line":27,"column":17},"end":{"line":27,"column":26}},"loc":{"start":{"line":27,"column":29},"end":{"line":36,"column":9}},"line":27},"7":{"name":"generateICS","decl":{"start":{"line":49,"column":34},"end":{"line":49,"column":45}},"loc":{"start":{"line":49,"column":48},"end":{"line":114,"column":13}},"line":49},"8":{"name":"(anonymous_8)","decl":{"start":{"line":94,"column":91},"end":{"line":94,"column":92}},"loc":{"start":{"line":94,"column":104},"end":{"line":101,"column":33}},"line":94},"9":{"name":"(anonymous_9)","decl":{"start":{"line":96,"column":49},"end":{"line":96,"column":50}},"loc":{"start":{"line":96,"column":63},"end":{"line":100,"column":37}},"line":96},"10":{"name":"absences","decl":{"start":{"line":126,"column":34},"end":{"line":126,"column":42}},"loc":{"start":{"line":126,"column":45},"end":{"line":159,"column":13}},"line":126},"11":{"name":"members","decl":{"start":{"line":170,"column":34},"end":{"line":170,"column":41}},"loc":{"start":{"line":170,"column":44},"end":{"line":199,"column":13}},"line":170}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":168},"end":{"line":3,"column":198}},"type":"binary-expr","locations":[{"start":{"line":3,"column":168},"end":{"line":3,"column":189}},{"start":{"line":3,"column":193},"end":{"line":3,"column":198}}],"line":3},"1":{"loc":{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},"type":"if","locations":[{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},{"start":{"line":3,"column":232},"end":{"line":3,"column":286}}],"line":3},"2":{"loc":{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},"type":"if","locations":[{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},{"start":{"line":3,"column":407},"end":{"line":3,"column":475}}],"line":3},"3":{"loc":{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},"type":"if","locations":[{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},{"start":{"line":3,"column":476},"end":{"line":3,"column":536}}],"line":3},"4":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},"type":"if","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},{"start":{"line":5,"column":50},"end":{"line":5,"column":151}}],"line":5},"5":{"loc":{"start":{"line":28,"column":23},"end":{"line":28,"column":93}},"type":"cond-expr","locations":[{"start":{"line":28,"column":76},"end":{"line":28,"column":88}},{"start":{"line":28,"column":91},"end":{"line":28,"column":93}}],"line":28},"6":{"loc":{"start":{"line":28,"column":23},"end":{"line":28,"column":73}},"type":"binary-expr","locations":[{"start":{"line":28,"column":23},"end":{"line":28,"column":43}},{"start":{"line":28,"column":47},"end":{"line":28,"column":73}}],"line":28},"7":{"loc":{"start":{"line":50,"column":27},"end":{"line":50,"column":105}},"type":"cond-expr","locations":[{"start":{"line":50,"column":80},"end":{"line":50,"column":92}},{"start":{"line":50,"column":95},"end":{"line":50,"column":105}}],"line":50},"8":{"loc":{"start":{"line":50,"column":27},"end":{"line":50,"column":77}},"type":"binary-expr","locations":[{"start":{"line":50,"column":27},"end":{"line":50,"column":47}},{"start":{"line":50,"column":51},"end":{"line":50,"column":77}}],"line":50},"9":{"loc":{"start":{"line":51,"column":26},"end":{"line":51,"column":98}},"type":"cond-expr","locations":[{"start":{"line":51,"column":79},"end":{"line":51,"column":91}},{"start":{"line":51,"column":94},"end":{"line":51,"column":98}}],"line":51},"10":{"loc":{"start":{"line":51,"column":26},"end":{"line":51,"column":76}},"type":"binary-expr","locations":[{"start":{"line":51,"column":26},"end":{"line":51,"column":46}},{"start":{"line":51,"column":50},"end":{"line":51,"column":76}}],"line":51},"11":{"loc":{"start":{"line":52,"column":29},"end":{"line":52,"column":106}},"type":"cond-expr","locations":[{"start":{"line":52,"column":82},"end":{"line":52,"column":94}},{"start":{"line":52,"column":97},"end":{"line":52,"column":106}}],"line":52},"12":{"loc":{"start":{"line":52,"column":29},"end":{"line":52,"column":79}},"type":"binary-expr","locations":[{"start":{"line":52,"column":29},"end":{"line":52,"column":49}},{"start":{"line":52,"column":53},"end":{"line":52,"column":79}}],"line":52},"13":{"loc":{"start":{"line":55,"column":16},"end":{"line":58,"column":17}},"type":"if","locations":[{"start":{"line":55,"column":16},"end":{"line":58,"column":17}},{"start":{"line":55,"column":16},"end":{"line":58,"column":17}}],"line":55},"14":{"loc":{"start":{"line":56,"column":20},"end":{"line":56,"column":82}},"type":"if","locations":[{"start":{"line":56,"column":20},"end":{"line":56,"column":82}},{"start":{"line":56,"column":20},"end":{"line":56,"column":82}}],"line":56},"15":{"loc":{"start":{"line":60,"column":16},"end":{"line":63,"column":17}},"type":"if","locations":[{"start":{"line":60,"column":16},"end":{"line":63,"column":17}},{"start":{"line":60,"column":16},"end":{"line":63,"column":17}}],"line":60},"16":{"loc":{"start":{"line":61,"column":20},"end":{"line":61,"column":76}},"type":"if","locations":[{"start":{"line":61,"column":20},"end":{"line":61,"column":76}},{"start":{"line":61,"column":20},"end":{"line":61,"column":76}}],"line":61},"17":{"loc":{"start":{"line":65,"column":16},"end":{"line":68,"column":17}},"type":"if","locations":[{"start":{"line":65,"column":16},"end":{"line":68,"column":17}},{"start":{"line":65,"column":16},"end":{"line":68,"column":17}}],"line":65},"18":{"loc":{"start":{"line":65,"column":55},"end":{"line":65,"column":65}},"type":"binary-expr","locations":[{"start":{"line":65,"column":55},"end":{"line":65,"column":59}},{"start":{"line":65,"column":63},"end":{"line":65,"column":65}}],"line":65},"19":{"loc":{"start":{"line":66,"column":20},"end":{"line":66,"column":83}},"type":"if","locations":[{"start":{"line":66,"column":20},"end":{"line":66,"column":83}},{"start":{"line":66,"column":20},"end":{"line":66,"column":83}}],"line":66},"20":{"loc":{"start":{"line":71,"column":16},"end":{"line":111,"column":17}},"type":"switch","locations":[{"start":{"line":72,"column":20},"end":{"line":107,"column":25}},{"start":{"line":109,"column":20},"end":{"line":110,"column":106}}],"line":71},"21":{"loc":{"start":{"line":77,"column":32},"end":{"line":77,"column":104}},"type":"if","locations":[{"start":{"line":77,"column":32},"end":{"line":77,"column":104}},{"start":{"line":77,"column":32},"end":{"line":77,"column":104}}],"line":77},"22":{"loc":{"start":{"line":78,"column":32},"end":{"line":80,"column":33}},"type":"if","locations":[{"start":{"line":78,"column":32},"end":{"line":80,"column":33}},{"start":{"line":78,"column":32},"end":{"line":80,"column":33}}],"line":78},"23":{"loc":{"start":{"line":79,"column":36},"end":{"line":79,"column":155}},"type":"if","locations":[{"start":{"line":79,"column":36},"end":{"line":79,"column":155}},{"start":{"line":79,"column":36},"end":{"line":79,"column":155}}],"line":79},"24":{"loc":{"start":{"line":83,"column":32},"end":{"line":85,"column":33}},"type":"if","locations":[{"start":{"line":83,"column":32},"end":{"line":85,"column":33}},{"start":{"line":83,"column":32},"end":{"line":85,"column":33}}],"line":83},"25":{"loc":{"start":{"line":97,"column":65},"end":{"line":97,"column":90}},"type":"binary-expr","locations":[{"start":{"line":97,"column":65},"end":{"line":97,"column":76}},{"start":{"line":97,"column":80},"end":{"line":97,"column":90}}],"line":97},"26":{"loc":{"start":{"line":98,"column":40},"end":{"line":98,"column":80}},"type":"if","locations":[{"start":{"line":98,"column":40},"end":{"line":98,"column":80}},{"start":{"line":98,"column":40},"end":{"line":98,"column":80}}],"line":98},"27":{"loc":{"start":{"line":99,"column":40},"end":{"line":99,"column":79}},"type":"if","locations":[{"start":{"line":99,"column":40},"end":{"line":99,"column":79}},{"start":{"line":99,"column":40},"end":{"line":99,"column":79}}],"line":99},"28":{"loc":{"start":{"line":127,"column":28},"end":{"line":127,"column":100}},"type":"cond-expr","locations":[{"start":{"line":127,"column":81},"end":{"line":127,"column":93}},{"start":{"line":127,"column":96},"end":{"line":127,"column":100}}],"line":127},"29":{"loc":{"start":{"line":127,"column":28},"end":{"line":127,"column":78}},"type":"binary-expr","locations":[{"start":{"line":127,"column":28},"end":{"line":127,"column":48}},{"start":{"line":127,"column":52},"end":{"line":127,"column":78}}],"line":127},"30":{"loc":{"start":{"line":128,"column":36},"end":{"line":128,"column":108}},"type":"cond-expr","locations":[{"start":{"line":128,"column":89},"end":{"line":128,"column":101}},{"start":{"line":128,"column":104},"end":{"line":128,"column":108}}],"line":128},"31":{"loc":{"start":{"line":128,"column":36},"end":{"line":128,"column":86}},"type":"binary-expr","locations":[{"start":{"line":128,"column":36},"end":{"line":128,"column":56}},{"start":{"line":128,"column":60},"end":{"line":128,"column":86}}],"line":128},"32":{"loc":{"start":{"line":129,"column":36},"end":{"line":129,"column":106}},"type":"cond-expr","locations":[{"start":{"line":129,"column":89},"end":{"line":129,"column":101}},{"start":{"line":129,"column":104},"end":{"line":129,"column":106}}],"line":129},"33":{"loc":{"start":{"line":129,"column":36},"end":{"line":129,"column":86}},"type":"binary-expr","locations":[{"start":{"line":129,"column":36},"end":{"line":129,"column":56}},{"start":{"line":129,"column":60},"end":{"line":129,"column":86}}],"line":129},"34":{"loc":{"start":{"line":136,"column":20},"end":{"line":136,"column":75}},"type":"if","locations":[{"start":{"line":136,"column":20},"end":{"line":136,"column":75}},{"start":{"line":136,"column":20},"end":{"line":136,"column":75}}],"line":136},"35":{"loc":{"start":{"line":142,"column":16},"end":{"line":158,"column":17}},"type":"if","locations":[{"start":{"line":142,"column":16},"end":{"line":158,"column":17}},{"start":{"line":142,"column":16},"end":{"line":158,"column":17}}],"line":142},"36":{"loc":{"start":{"line":142,"column":20},"end":{"line":142,"column":54}},"type":"binary-expr","locations":[{"start":{"line":142,"column":20},"end":{"line":142,"column":35}},{"start":{"line":142,"column":39},"end":{"line":142,"column":54}}],"line":142},"37":{"loc":{"start":{"line":145,"column":24},"end":{"line":145,"column":81}},"type":"if","locations":[{"start":{"line":145,"column":24},"end":{"line":145,"column":81}},{"start":{"line":145,"column":24},"end":{"line":145,"column":81}}],"line":145},"38":{"loc":{"start":{"line":145,"column":29},"end":{"line":145,"column":48}},"type":"binary-expr","locations":[{"start":{"line":145,"column":29},"end":{"line":145,"column":42}},{"start":{"line":145,"column":46},"end":{"line":145,"column":48}}],"line":145},"39":{"loc":{"start":{"line":171,"column":28},"end":{"line":171,"column":100}},"type":"cond-expr","locations":[{"start":{"line":171,"column":81},"end":{"line":171,"column":93}},{"start":{"line":171,"column":96},"end":{"line":171,"column":100}}],"line":171},"40":{"loc":{"start":{"line":171,"column":28},"end":{"line":171,"column":78}},"type":"binary-expr","locations":[{"start":{"line":171,"column":28},"end":{"line":171,"column":48}},{"start":{"line":171,"column":52},"end":{"line":171,"column":78}}],"line":171},"41":{"loc":{"start":{"line":172,"column":36},"end":{"line":172,"column":106}},"type":"cond-expr","locations":[{"start":{"line":172,"column":89},"end":{"line":172,"column":101}},{"start":{"line":172,"column":104},"end":{"line":172,"column":106}}],"line":172},"42":{"loc":{"start":{"line":172,"column":36},"end":{"line":172,"column":86}},"type":"binary-expr","locations":[{"start":{"line":172,"column":36},"end":{"line":172,"column":56}},{"start":{"line":172,"column":60},"end":{"line":172,"column":86}}],"line":172},"43":{"loc":{"start":{"line":173,"column":34},"end":{"line":173,"column":106}},"type":"cond-expr","locations":[{"start":{"line":173,"column":87},"end":{"line":173,"column":99}},{"start":{"line":173,"column":102},"end":{"line":173,"column":106}}],"line":173},"44":{"loc":{"start":{"line":173,"column":34},"end":{"line":173,"column":84}},"type":"binary-expr","locations":[{"start":{"line":173,"column":34},"end":{"line":173,"column":54}},{"start":{"line":173,"column":58},"end":{"line":173,"column":84}}],"line":173},"45":{"loc":{"start":{"line":180,"column":20},"end":{"line":180,"column":74}},"type":"if","locations":[{"start":{"line":180,"column":20},"end":{"line":180,"column":74}},{"start":{"line":180,"column":20},"end":{"line":180,"column":74}}],"line":180},"46":{"loc":{"start":{"line":183,"column":16},"end":{"line":198,"column":17}},"type":"if","locations":[{"start":{"line":183,"column":16},"end":{"line":198,"column":17}},{"start":{"line":183,"column":16},"end":{"line":198,"column":17}}],"line":183},"47":{"loc":{"start":{"line":183,"column":20},"end":{"line":183,"column":54}},"type":"binary-expr","locations":[{"start":{"line":183,"column":20},"end":{"line":183,"column":35}},{"start":{"line":183,"column":39},"end":{"line":183,"column":54}}],"line":183},"48":{"loc":{"start":{"line":186,"column":24},"end":{"line":186,"column":81}},"type":"if","locations":[{"start":{"line":186,"column":24},"end":{"line":186,"column":81}},{"start":{"line":186,"column":24},"end":{"line":186,"column":81}}],"line":186},"49":{"loc":{"start":{"line":186,"column":29},"end":{"line":186,"column":48}},"type":"binary-expr","locations":[{"start":{"line":186,"column":29},"end":{"line":186,"column":42}},{"start":{"line":186,"column":46},"end":{"line":186,"column":48}}],"line":186}},"s":{"0":1,"1":1,"2":1,"3":3,"4":3,"5":3,"6":3,"7":3,"8":3,"9":1,"10":1,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":16,"75":16,"76":16,"77":16,"78":16,"79":16,"80":16,"81":0,"82":0,"83":0,"84":16,"85":14,"86":14,"87":14,"88":0,"89":14,"90":14,"91":0,"92":0,"93":2,"94":2,"95":152,"96":152,"97":152,"98":152,"99":152,"100":152,"101":152,"102":0,"103":0,"104":0,"105":152,"106":150,"107":150,"108":150,"109":0,"110":150,"111":150,"112":0,"113":0,"114":2,"115":2,"116":1,"117":1,"118":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":16,"11":152},"b":{"0":[3,3],"1":[3,0],"2":[1,0],"3":[0,1],"4":[0,1],"5":[1,0],"6":[1,1],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[16,0],"29":[16,16],"30":[16,0],"31":[16,16],"32":[0,16],"33":[16,0],"34":[0,0],"35":[14,2],"36":[16,14],"37":[0,14],"38":[14,0],"39":[152,0],"40":[152,152],"41":[4,148],"42":[152,4],"43":[4,148],"44":[152,4],"45":[0,0],"46":[150,2],"47":[152,151],"48":[0,150],"49":[150,0]},"inputSourceMap":{"version":3,"sources":["ics.module.js"],"names":["module","exports","XDB","require","notify","isObject","isFalsy","head","ICSmodule","opts","debug","d","type","uId","dbName","Number","availableAbsenceTypes","indexOf","userOutput","memberData","members","userId","length","user","userAbsencesList","absences","calEvents","createICalEvents","populateICalEvents","then","z","map","Object","keys","el","done","created","error","query","includeMember","searchByLimit","data","absencesDB","err","Promise","reject","filter","arrAsync","queryFilter","assignMember","all","showAbsence","membersDB","assignAbsences","ICSExt"],"mappings":"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","file":"ics.module.js","sourceRoot":"X:/workflow/open-projects/ics-calendar/libs/ics","sourcesContent":["\r\n`use strict`\r\n/** \r\n * @ICS\r\n * - calendar file handler class, used to generate `.ics, .ical` files for MS and Apple\r\n * - import `ics.api` database records: `{absences,members}` both correlate with `crewId, userId` props.\r\n * - `new ICS({},debug)`\r\n * - ical ref: `https://en.wikipedia.org/wiki/ICalendar`\r\n * - ics ref: `https://www.npmjs.com/package/ics`\r\n*/\r\nmodule.exports = () => {\r\n    const XDB = require('../xdb/xdb.api.module')()\r\n    const { notify, isObject, isFalsy, head } = require('x-units')\r\n\r\n    class ICSmodule {\r\n        // @ts-ignore\r\n        constructor(opts = {}, debug) {\r\n            this.debug = debug\r\n            this.d = null // temporary hold data\r\n            this.XDB = new XDB() // initiale database\r\n        }\r\n\r\n        /**\r\n         * - generate new ics file by cross reference of 2 databases. Find member by `userId` and match them with  by `type`\r\n         * @param {string} type references record prop on `absences` database\r\n         * @param {number} uId required, get user by id\r\n         * @param {string} dbName defaults to `members`\r\n         * @borrows `members, absences`\r\n         */\r\n        async generateICS(type = 'vacation', uId = null, dbName = 'members') {\r\n\r\n            if (!dbName) {\r\n                if (this.debug) notify('[generateICS] no dbName selected', 1)\r\n                return []\r\n            }\r\n\r\n            if (Number(uId) < 0) {\r\n                if (this.debug) notify('[generateICS] wrong userId', 1)\r\n                return []\r\n            }\r\n\r\n            if (this.availableAbsenceTypes.indexOf(type || '') === -1) {\r\n                if (this.debug) notify('[generateICS] wrong type selected', 1)\r\n                return []\r\n            }\r\n\r\n            let userOutput = []\r\n            switch (dbName) {\r\n                case 'members': {\r\n\r\n                    try {\r\n                        const memberData = await this.members({ userId: uId })\r\n                        if (!memberData.length) throw (`no member with userId:${uId} found`)\r\n                        if (memberData.length > 1) {\r\n                            if (this.debug) notify(`[generateICS] found more then one userId:${uId} on members database, selecting first`, 0)\r\n                        }\r\n\r\n                        const user = head(memberData)\r\n                        if (!user) {\r\n                            break\r\n                        }\r\n\r\n                        const { userId } = user // {crewId,name,id,userId}\r\n                        const userAbsencesList = await this.absences({ userId, type }, true, ['userId', type]) \r\n\r\n                        // 1. create event list for ics files\r\n                        const calEvents = this.createICalEvents(userAbsencesList) \r\n                        // 2. populate ics files   \r\n                        userOutput = await this.populateICalEvents(calEvents).then(z => {\r\n                            // notify({populateICalEvents:z})\r\n                            return z.map(el => {\r\n                                const userId = Object.keys(el['error'] || el['done'])[0] // > productId\r\n                                if (el.done) return { created: userId }\r\n                                if (el.error) return { error: userId }\r\n                            })\r\n                        })\r\n\r\n                    } catch (error) {\r\n                        notify({ error }, 1)\r\n                    }\r\n\r\n                    break\r\n                }\r\n\r\n                default:\r\n                    notify(`[generateICS] wrong dbName: ${dbName} selected no ics generated`, 1)\r\n            }\r\n\r\n            return userOutput\r\n        }\r\n    \r\n        /**\r\n         * \r\n         * @param {boolean} includeMember when true, propetry: `member:{}` will be added\r\n         * @param {array} searchByLimit when selected will override `queryFilter`\r\n         * @borrows `queryFilter,assignMember`\r\n         * @returns [{},..] list of items\r\n         */\r\n        async absences(query = null, includeMember = null, searchByLimit = []) {\r\n            this.d = null\r\n            let data = []\r\n            try {\r\n                data = await this.XDB.absencesDB()\r\n            } catch (err) {\r\n                if (this.debug) notify('[absences] database empty', 1)\r\n                return Promise.reject('database empt')\r\n            }\r\n            \r\n            // when query is set and `includeMember` enabled (by default) on controller.absences(...)\r\n            // it will again perform another query against `members({userId})` to be added on each item\r\n            if (isObject(query) && !isFalsy(query)) {\r\n                try {\r\n                    let filter = ['userId', 'startDate', 'endDate'] // queryFilter\r\n                    if ((searchByLimit || []).length) filter = searchByLimit\r\n                    // @ts-ignore\r\n                    const arrAsync = this.queryFilter(data, query, filter, 'absences')\r\n                        .assignMember(includeMember).d \r\n                    \r\n                    return Promise.all(arrAsync)\r\n                } catch (error) {\r\n                    notify({ error }, 1)\r\n                    return []\r\n                }\r\n            } else {\r\n                this.d = data\r\n                // @ts-ignore\r\n                return Promise.all(this.assignMember(includeMember).d)\r\n            }\r\n        }\r\n\r\n        /**\r\n        * @param {object} query optional\r\n        * @param {array} searchByLimit when selected will override `queryFilter`\r\n        * @borrows `queryFilter`\r\n        * @returns [{},..] list of items\r\n        */\r\n        async members(query = null, searchByLimit = [], showAbsence = null) {\r\n            this.d = null\r\n            let data = []\r\n            try {\r\n                data = await this.XDB.membersDB()\r\n            } catch (err) {\r\n                if (this.debug) notify('[members] database empty', 1)\r\n                return Promise.reject('database empty')\r\n            }\r\n            if (isObject(query) && !isFalsy(query)) {\r\n                try {\r\n                    let filter = ['userId'] // queryFilter\r\n                    if ((searchByLimit || []).length) filter = searchByLimit\r\n                    // @ts-ignore\r\n                    const arrAsync = this.queryFilter(data, query, filter, 'members')\r\n                        .assignAbsences(showAbsence).d\r\n\r\n                    return Promise.all(arrAsync)\r\n                } catch (error) {\r\n                    notify({ error }, 1)\r\n                    return []\r\n                }\r\n            } else {\r\n                this.d = data         \r\n                return Promise.all(this.assignAbsences(showAbsence).d)\r\n            }\r\n        }\r\n    }\r\n\r\n    const ICSExt = require('./ics.libs')(ICSmodule)\r\n    return ICSExt\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fcf6dba37a0b841295c5041201d6ef5f39766e01","contentHash":"f723c322aeabc6cf85ae63c018be34b9b218c4551c0d1c0a7c12b61c571d9fc1"},"X:\\workflow\\open-projects\\ics-calendar\\libs\\xdb\\xdb.api.module.js":{"path":"X:\\workflow\\open-projects\\ics-calendar\\libs\\xdb\\xdb.api.module.js","statementMap":{"0":{"start":{"line":3,"column":19},"end":{"line":3,"column":563}},"1":{"start":{"line":3,"column":76},"end":{"line":3,"column":347}},"2":{"start":{"line":3,"column":89},"end":{"line":3,"column":90}},"3":{"start":{"line":3,"column":134},"end":{"line":3,"column":142}},"4":{"start":{"line":3,"column":144},"end":{"line":3,"column":199}},"5":{"start":{"line":3,"column":200},"end":{"line":3,"column":231}},"6":{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},"7":{"start":{"line":3,"column":259},"end":{"line":3,"column":286}},"8":{"start":{"line":3,"column":287},"end":{"line":3,"column":345}},"9":{"start":{"line":3,"column":350},"end":{"line":3,"column":559}},"10":{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},"11":{"start":{"line":3,"column":423},"end":{"line":3,"column":475}},"12":{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},"13":{"start":{"line":3,"column":493},"end":{"line":3,"column":536}},"14":{"start":{"line":3,"column":537},"end":{"line":3,"column":556}},"15":{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},"16":{"start":{"line":5,"column":92},"end":{"line":5,"column":149}},"17":{"start":{"line":7,"column":0},"end":{"line":7,"column":13}},"18":{"start":{"line":12,"column":0},"end":{"line":47,"column":2}},"19":{"start":{"line":13,"column":19},"end":{"line":13,"column":40}},"20":{"start":{"line":14,"column":20},"end":{"line":14,"column":38}},"21":{"start":{"line":17,"column":4},"end":{"line":46,"column":8}},"22":{"start":{"line":22,"column":23},"end":{"line":22,"column":93}},"23":{"start":{"line":24,"column":12},"end":{"line":24,"column":39}},"24":{"start":{"line":27,"column":8},"end":{"line":43,"column":12}},"25":{"start":{"line":31,"column":16},"end":{"line":33,"column":19}},"26":{"start":{"line":32,"column":20},"end":{"line":32,"column":40}},"27":{"start":{"line":39,"column":16},"end":{"line":41,"column":19}},"28":{"start":{"line":40,"column":20},"end":{"line":40,"column":40}},"29":{"start":{"line":45,"column":8},"end":{"line":45,"column":19}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":19},"end":{"line":3,"column":20}},"loc":{"start":{"line":3,"column":31},"end":{"line":3,"column":561}},"line":3},"1":{"name":"defineProperties","decl":{"start":{"line":3,"column":42},"end":{"line":3,"column":58}},"loc":{"start":{"line":3,"column":74},"end":{"line":3,"column":349}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":357},"end":{"line":3,"column":358}},"loc":{"start":{"line":3,"column":405},"end":{"line":3,"column":558}},"line":3},"3":{"name":"_classCallCheck","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":24}},"loc":{"start":{"line":5,"column":48},"end":{"line":5,"column":153}},"line":5},"4":{"name":"(anonymous_4)","decl":{"start":{"line":12,"column":17},"end":{"line":12,"column":18}},"loc":{"start":{"line":12,"column":29},"end":{"line":47,"column":1}},"line":12},"5":{"name":"(anonymous_5)","decl":{"start":{"line":17,"column":11},"end":{"line":17,"column":12}},"loc":{"start":{"line":17,"column":23},"end":{"line":46,"column":5}},"line":17},"6":{"name":"XDB","decl":{"start":{"line":19,"column":17},"end":{"line":19,"column":20}},"loc":{"start":{"line":19,"column":23},"end":{"line":25,"column":9}},"line":19},"7":{"name":"membersDB","decl":{"start":{"line":29,"column":28},"end":{"line":29,"column":37}},"loc":{"start":{"line":29,"column":40},"end":{"line":34,"column":13}},"line":29},"8":{"name":"(anonymous_8)","decl":{"start":{"line":31,"column":68},"end":{"line":31,"column":69}},"loc":{"start":{"line":31,"column":84},"end":{"line":33,"column":17}},"line":31},"9":{"name":"absencesDB","decl":{"start":{"line":37,"column":28},"end":{"line":37,"column":38}},"loc":{"start":{"line":37,"column":41},"end":{"line":42,"column":13}},"line":37},"10":{"name":"(anonymous_10)","decl":{"start":{"line":39,"column":69},"end":{"line":39,"column":70}},"loc":{"start":{"line":39,"column":85},"end":{"line":41,"column":17}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":168},"end":{"line":3,"column":198}},"type":"binary-expr","locations":[{"start":{"line":3,"column":168},"end":{"line":3,"column":189}},{"start":{"line":3,"column":193},"end":{"line":3,"column":198}}],"line":3},"1":{"loc":{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},"type":"if","locations":[{"start":{"line":3,"column":232},"end":{"line":3,"column":286}},{"start":{"line":3,"column":232},"end":{"line":3,"column":286}}],"line":3},"2":{"loc":{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},"type":"if","locations":[{"start":{"line":3,"column":407},"end":{"line":3,"column":475}},{"start":{"line":3,"column":407},"end":{"line":3,"column":475}}],"line":3},"3":{"loc":{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},"type":"if","locations":[{"start":{"line":3,"column":476},"end":{"line":3,"column":536}},{"start":{"line":3,"column":476},"end":{"line":3,"column":536}}],"line":3},"4":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},"type":"if","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":151}},{"start":{"line":5,"column":50},"end":{"line":5,"column":151}}],"line":5},"5":{"loc":{"start":{"line":22,"column":23},"end":{"line":22,"column":93}},"type":"cond-expr","locations":[{"start":{"line":22,"column":76},"end":{"line":22,"column":88}},{"start":{"line":22,"column":91},"end":{"line":22,"column":93}}],"line":22},"6":{"loc":{"start":{"line":22,"column":23},"end":{"line":22,"column":73}},"type":"binary-expr","locations":[{"start":{"line":22,"column":23},"end":{"line":22,"column":43}},{"start":{"line":22,"column":47},"end":{"line":22,"column":73}}],"line":22}},"s":{"0":1,"1":1,"2":1,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":1,"10":1,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":152,"26":152,"27":16,"28":16,"29":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":152,"8":152,"9":16,"10":16},"b":{"0":[2,2],"1":[2,0],"2":[1,0],"3":[0,1],"4":[0,1],"5":[0,1],"6":[1,0]},"inputSourceMap":{"version":3,"sources":["xdb.api.module.js"],"names":["module","exports","require","dataAsync","opts","then","data","payload"],"mappings":";;;;;;AAAA;AACA;;;;AAIAA,OAAOC,OAAP,GAAiB,YAAM;AAAA,mBACGC,QAAQ,UAAR,GADH;AAAA,QACXC,SADW,YACXA,SADW;AAEnB;;AAEA;AACI;AACA,uBAAuB;AACnB;;AADmB,gBAAXC,IAAW,uEAAJ,EAAI;;AAAA;AAEtB;;AAJL;AAAA;AAAA,wCAMgB;AACR;AACA,uBAAOD,UAAUD,QAAQ,mBAAR,CAAV,EACFG,IADE,CACG,UAACC,IAAD;AAAA,2BAAUA,KAAKC,OAAf;AAAA,iBADH,CAAP;AAEH;AAVL;AAAA;AAAA,yCAYiB;AACT;AACA,uBAAOJ,UAAUD,QAAQ,oBAAR,CAAV,EACFG,IADE,CACG,UAACC,IAAD;AAAA,2BAAUA,KAAKC,OAAf;AAAA,iBADH,CAAP;AAEH;AAhBL;;AAAA;AAAA;AAkBH,CAtBD","file":"xdb.api.module.js","sourceRoot":"X:/workflow/open-projects/ics-calendar/libs/xdb","sourcesContent":["`use strict`\r\n/** \r\n * @XDB database mock\r\n * - available databases: [members,absences]\r\n*/\r\nmodule.exports = () => {\r\n    const { dataAsync } = require('../utils')()\r\n    // const { isArray } = require('x-units')\r\n\r\n    return class XDB {\r\n        // @ts-ignore\r\n        constructor(opts = {}) {\r\n            // TODO\r\n        }\r\n\r\n        membersDB() {\r\n            // @ts-ignore\r\n            return dataAsync(require('./members.db.json'))\r\n                .then((data) => data.payload)\r\n        }\r\n\r\n        absencesDB() {\r\n            // @ts-ignore\r\n            return dataAsync(require('./absences.db.json'))\r\n                .then((data) => data.payload)\r\n        }\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fbf3a26fa50f1818c6ecec354bd856f042b1b73f","contentHash":"bf9d19a16942e76ea91a53568f9a3bb66e81b5724e6b1e6b31904520cc12cdb2"},"X:\\workflow\\open-projects\\ics-calendar\\libs\\ics\\ics.libs.js":{"path":"X:\\workflow\\open-projects\\ics-calendar\\libs\\ics\\ics.libs.js","statementMap":{"0":{"start":{"line":3,"column":21},"end":{"line":3,"column":663}},"1":{"start":{"line":3,"column":79},"end":{"line":3,"column":81}},"2":{"start":{"line":3,"column":92},"end":{"line":3,"column":96}},"3":{"start":{"line":3,"column":107},"end":{"line":3,"column":112}},"4":{"start":{"line":3,"column":123},"end":{"line":3,"column":132}},"5":{"start":{"line":3,"column":134},"end":{"line":3,"column":413}},"6":{"start":{"line":3,"column":140},"end":{"line":3,"column":283}},"7":{"start":{"line":3,"column":154},"end":{"line":3,"column":176}},"8":{"start":{"line":3,"column":226},"end":{"line":3,"column":246}},"9":{"start":{"line":3,"column":247},"end":{"line":3,"column":281}},"10":{"start":{"line":3,"column":275},"end":{"line":3,"column":281}},"11":{"start":{"line":3,"column":300},"end":{"line":3,"column":310}},"12":{"start":{"line":3,"column":311},"end":{"line":3,"column":320}},"13":{"start":{"line":3,"column":333},"end":{"line":3,"column":411}},"14":{"start":{"line":3,"column":339},"end":{"line":3,"column":379}},"15":{"start":{"line":3,"column":364},"end":{"line":3,"column":379}},"16":{"start":{"line":3,"column":392},"end":{"line":3,"column":409}},"17":{"start":{"line":3,"column":400},"end":{"line":3,"column":409}},"18":{"start":{"line":3,"column":414},"end":{"line":3,"column":426}},"19":{"start":{"line":3,"column":429},"end":{"line":3,"column":659}},"20":{"start":{"line":3,"column":456},"end":{"line":3,"column":656}},"21":{"start":{"line":3,"column":482},"end":{"line":3,"column":493}},"22":{"start":{"line":3,"column":501},"end":{"line":3,"column":656}},"23":{"start":{"line":3,"column":539},"end":{"line":3,"column":568}},"24":{"start":{"line":3,"column":578},"end":{"line":3,"column":654}},"25":{"start":{"line":5,"column":19},"end":{"line":5,"column":563}},"26":{"start":{"line":5,"column":76},"end":{"line":5,"column":347}},"27":{"start":{"line":5,"column":89},"end":{"line":5,"column":90}},"28":{"start":{"line":5,"column":134},"end":{"line":5,"column":142}},"29":{"start":{"line":5,"column":144},"end":{"line":5,"column":199}},"30":{"start":{"line":5,"column":200},"end":{"line":5,"column":231}},"31":{"start":{"line":5,"column":232},"end":{"line":5,"column":286}},"32":{"start":{"line":5,"column":259},"end":{"line":5,"column":286}},"33":{"start":{"line":5,"column":287},"end":{"line":5,"column":345}},"34":{"start":{"line":5,"column":350},"end":{"line":5,"column":559}},"35":{"start":{"line":5,"column":407},"end":{"line":5,"column":475}},"36":{"start":{"line":5,"column":423},"end":{"line":5,"column":475}},"37":{"start":{"line":5,"column":476},"end":{"line":5,"column":536}},"38":{"start":{"line":5,"column":493},"end":{"line":5,"column":536}},"39":{"start":{"line":5,"column":537},"end":{"line":5,"column":556}},"40":{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},"41":{"start":{"line":7,"column":62},"end":{"line":7,"column":166}},"42":{"start":{"line":7,"column":176},"end":{"line":7,"column":193}},"43":{"start":{"line":7,"column":196},"end":{"line":7,"column":207}},"44":{"start":{"line":9,"column":50},"end":{"line":9,"column":151}},"45":{"start":{"line":9,"column":92},"end":{"line":9,"column":149}},"46":{"start":{"line":11,"column":50},"end":{"line":11,"column":151}},"47":{"start":{"line":11,"column":63},"end":{"line":11,"column":149}},"48":{"start":{"line":11,"column":152},"end":{"line":11,"column":238}},"49":{"start":{"line":13,"column":43},"end":{"line":13,"column":208}},"50":{"start":{"line":13,"column":106},"end":{"line":13,"column":206}},"51":{"start":{"line":13,"column":209},"end":{"line":13,"column":373}},"52":{"start":{"line":13,"column":374},"end":{"line":13,"column":492}},"53":{"start":{"line":13,"column":390},"end":{"line":13,"column":492}},"54":{"start":{"line":15,"column":0},"end":{"line":15,"column":13}},"55":{"start":{"line":20,"column":0},"end":{"line":589,"column":2}},"56":{"start":{"line":21,"column":17},"end":{"line":21,"column":40}},"57":{"start":{"line":23,"column":19},"end":{"line":23,"column":40}},"58":{"start":{"line":24,"column":15},"end":{"line":24,"column":28}},"59":{"start":{"line":26,"column":20},"end":{"line":26,"column":38}},"60":{"start":{"line":27,"column":17},"end":{"line":27,"column":33}},"61":{"start":{"line":28,"column":19},"end":{"line":28,"column":37}},"62":{"start":{"line":29,"column":18},"end":{"line":29,"column":35}},"63":{"start":{"line":30,"column":15},"end":{"line":30,"column":29}},"64":{"start":{"line":31,"column":23},"end":{"line":31,"column":45}},"65":{"start":{"line":32,"column":18},"end":{"line":32,"column":35}},"66":{"start":{"line":33,"column":15},"end":{"line":33,"column":29}},"67":{"start":{"line":35,"column":17},"end":{"line":35,"column":35}},"68":{"start":{"line":36,"column":14},"end":{"line":36,"column":28}},"69":{"start":{"line":37,"column":13},"end":{"line":37,"column":26}},"70":{"start":{"line":38,"column":15},"end":{"line":38,"column":30}},"71":{"start":{"line":40,"column":20},"end":{"line":40,"column":37}},"72":{"start":{"line":41,"column":17},"end":{"line":41,"column":33}},"73":{"start":{"line":42,"column":17},"end":{"line":42,"column":33}},"74":{"start":{"line":43,"column":19},"end":{"line":43,"column":37}},"75":{"start":{"line":45,"column":13},"end":{"line":45,"column":32}},"76":{"start":{"line":46,"column":17},"end":{"line":46,"column":34}},"77":{"start":{"line":48,"column":4},"end":{"line":588,"column":17}},"78":{"start":{"line":49,"column":8},"end":{"line":49,"column":39}},"79":{"start":{"line":52,"column":12},"end":{"line":52,"column":43}},"80":{"start":{"line":54,"column":12},"end":{"line":54,"column":131}},"81":{"start":{"line":64,"column":8},"end":{"line":585,"column":12}},"82":{"start":{"line":67,"column":37},"end":{"line":67,"column":107}},"83":{"start":{"line":70,"column":16},"end":{"line":70,"column":71}},"84":{"start":{"line":70,"column":47},"end":{"line":70,"column":71}},"85":{"start":{"line":71,"column":32},"end":{"line":71,"column":34}},"86":{"start":{"line":74,"column":16},"end":{"line":83,"column":17}},"87":{"start":{"line":74,"column":31},"end":{"line":74,"column":32}},"88":{"start":{"line":75,"column":31},"end":{"line":75,"column":50}},"89":{"start":{"line":76,"column":20},"end":{"line":82,"column":21}},"90":{"start":{"line":77,"column":40},"end":{"line":77,"column":74}},"91":{"start":{"line":78,"column":24},"end":{"line":78,"column":49}},"92":{"start":{"line":78,"column":40},"end":{"line":78,"column":49}},"93":{"start":{"line":79,"column":24},"end":{"line":79,"column":50}},"94":{"start":{"line":81,"column":24},"end":{"line":81,"column":33}},"95":{"start":{"line":84,"column":16},"end":{"line":84,"column":33}},"96":{"start":{"line":95,"column":32},"end":{"line":95,"column":102}},"97":{"start":{"line":99,"column":32},"end":{"line":99,"column":36}},"98":{"start":{"line":101,"column":20},"end":{"line":109,"column":23}},"99":{"start":{"line":102,"column":24},"end":{"line":102,"column":104}},"100":{"start":{"line":102,"column":35},"end":{"line":102,"column":104}},"101":{"start":{"line":104,"column":42},"end":{"line":104,"column":61}},"102":{"start":{"line":105,"column":24},"end":{"line":108,"column":27}},"103":{"start":{"line":106,"column":28},"end":{"line":106,"column":104}},"104":{"start":{"line":106,"column":37},"end":{"line":106,"column":104}},"105":{"start":{"line":107,"column":28},"end":{"line":107,"column":91}},"106":{"start":{"line":111,"column":20},"end":{"line":111,"column":43}},"107":{"start":{"line":114,"column":39},"end":{"line":114,"column":41}},"108":{"start":{"line":115,"column":16},"end":{"line":123,"column":17}},"109":{"start":{"line":115,"column":31},"end":{"line":115,"column":32}},"110":{"start":{"line":117,"column":20},"end":{"line":122,"column":21}},"111":{"start":{"line":118,"column":24},"end":{"line":118,"column":90}},"112":{"start":{"line":120,"column":24},"end":{"line":120,"column":78}},"113":{"start":{"line":121,"column":24},"end":{"line":121,"column":107}},"114":{"start":{"line":124,"column":16},"end":{"line":124,"column":40}},"115":{"start":{"line":135,"column":34},"end":{"line":135,"column":104}},"116":{"start":{"line":137,"column":30},"end":{"line":137,"column":36}},"117":{"start":{"line":138,"column":16},"end":{"line":147,"column":17}},"118":{"start":{"line":140,"column":24},"end":{"line":140,"column":58}},"119":{"start":{"line":141,"column":24},"end":{"line":141,"column":30}},"120":{"start":{"line":143,"column":24},"end":{"line":143,"column":65}},"121":{"start":{"line":144,"column":24},"end":{"line":144,"column":30}},"122":{"start":{"line":146,"column":24},"end":{"line":146,"column":104}},"123":{"start":{"line":146,"column":40},"end":{"line":146,"column":104}},"124":{"start":{"line":148,"column":16},"end":{"line":148,"column":31}},"125":{"start":{"line":163,"column":27},"end":{"line":163,"column":31}},"126":{"start":{"line":192,"column":16},"end":{"line":327,"column":37}},"127":{"start":{"line":193,"column":33},"end":{"line":193,"column":37}},"128":{"start":{"line":195,"column":20},"end":{"line":197,"column":21}},"129":{"start":{"line":196,"column":24},"end":{"line":196,"column":64}},"130":{"start":{"line":199,"column":31},"end":{"line":199,"column":50}},"131":{"start":{"line":200,"column":36},"end":{"line":200,"column":50}},"132":{"start":{"line":201,"column":36},"end":{"line":201,"column":50}},"133":{"start":{"line":202,"column":34},"end":{"line":202,"column":46}},"134":{"start":{"line":203,"column":31},"end":{"line":203,"column":40}},"135":{"start":{"line":204,"column":33},"end":{"line":204,"column":44}},"136":{"start":{"line":205,"column":39},"end":{"line":205,"column":56}},"137":{"start":{"line":206,"column":38},"end":{"line":206,"column":54}},"138":{"start":{"line":207,"column":37},"end":{"line":207,"column":52}},"139":{"start":{"line":208,"column":39},"end":{"line":208,"column":56}},"140":{"start":{"line":209,"column":37},"end":{"line":209,"column":52}},"141":{"start":{"line":210,"column":29},"end":{"line":210,"column":36}},"142":{"start":{"line":211,"column":37},"end":{"line":211,"column":52}},"143":{"start":{"line":213,"column":44},"end":{"line":219,"column":21}},"144":{"start":{"line":214,"column":40},"end":{"line":214,"column":109}},"145":{"start":{"line":216,"column":24},"end":{"line":218,"column":27}},"146":{"start":{"line":217,"column":28},"end":{"line":217,"column":90}},"147":{"start":{"line":221,"column":20},"end":{"line":225,"column":22}},"148":{"start":{"line":222,"column":32},"end":{"line":222,"column":110}},"149":{"start":{"line":223,"column":24},"end":{"line":223,"column":43}},"150":{"start":{"line":223,"column":31},"end":{"line":223,"column":43}},"151":{"start":{"line":224,"column":24},"end":{"line":224,"column":66}},"152":{"start":{"line":227,"column":20},"end":{"line":231,"column":22}},"153":{"start":{"line":228,"column":32},"end":{"line":228,"column":104}},"154":{"start":{"line":229,"column":24},"end":{"line":229,"column":43}},"155":{"start":{"line":229,"column":31},"end":{"line":229,"column":43}},"156":{"start":{"line":230,"column":24},"end":{"line":230,"column":66}},"157":{"start":{"line":233,"column":20},"end":{"line":237,"column":22}},"158":{"start":{"line":234,"column":32},"end":{"line":234,"column":114}},"159":{"start":{"line":235,"column":24},"end":{"line":235,"column":43}},"160":{"start":{"line":235,"column":31},"end":{"line":235,"column":43}},"161":{"start":{"line":236,"column":24},"end":{"line":236,"column":66}},"162":{"start":{"line":240,"column":20},"end":{"line":245,"column":22}},"163":{"start":{"line":241,"column":38},"end":{"line":241,"column":67}},"164":{"start":{"line":242,"column":32},"end":{"line":242,"column":92}},"165":{"start":{"line":243,"column":24},"end":{"line":243,"column":43}},"166":{"start":{"line":243,"column":31},"end":{"line":243,"column":43}},"167":{"start":{"line":244,"column":24},"end":{"line":244,"column":66}},"168":{"start":{"line":247,"column":20},"end":{"line":247,"column":40}},"169":{"start":{"line":248,"column":20},"end":{"line":248,"column":51}},"170":{"start":{"line":251,"column":20},"end":{"line":257,"column":22}},"171":{"start":{"line":252,"column":32},"end":{"line":252,"column":108}},"172":{"start":{"line":253,"column":24},"end":{"line":256,"column":40}},"173":{"start":{"line":254,"column":28},"end":{"line":254,"column":103}},"174":{"start":{"line":254,"column":44},"end":{"line":254,"column":103}},"175":{"start":{"line":255,"column":28},"end":{"line":255,"column":40}},"176":{"start":{"line":256,"column":31},"end":{"line":256,"column":40}},"177":{"start":{"line":259,"column":20},"end":{"line":266,"column":22}},"178":{"start":{"line":260,"column":24},"end":{"line":265,"column":25}},"179":{"start":{"line":261,"column":28},"end":{"line":261,"column":74}},"180":{"start":{"line":264,"column":28},"end":{"line":264,"column":40}},"181":{"start":{"line":268,"column":20},"end":{"line":268,"column":129}},"182":{"start":{"line":271,"column":20},"end":{"line":271,"column":115}},"183":{"start":{"line":273,"column":20},"end":{"line":273,"column":166}},"184":{"start":{"line":278,"column":20},"end":{"line":280,"column":22}},"185":{"start":{"line":279,"column":24},"end":{"line":279,"column":52}},"186":{"start":{"line":283,"column":20},"end":{"line":285,"column":22}},"187":{"start":{"line":284,"column":24},"end":{"line":284,"column":123}},"188":{"start":{"line":287,"column":20},"end":{"line":326,"column":22}},"189":{"start":{"line":288,"column":34},"end":{"line":304,"column":25}},"190":{"start":{"line":304,"column":26},"end":{"line":304,"column":65}},"191":{"start":{"line":304,"column":47},"end":{"line":304,"column":65}},"192":{"start":{"line":306,"column":45},"end":{"line":306,"column":145}},"193":{"start":{"line":309,"column":39},"end":{"line":309,"column":60}},"194":{"start":{"line":310,"column":39},"end":{"line":320,"column":58}},"195":{"start":{"line":312,"column":28},"end":{"line":319,"column":38}},"196":{"start":{"line":314,"column":32},"end":{"line":318,"column":64}},"197":{"start":{"line":314,"column":48},"end":{"line":316,"column":46}},"198":{"start":{"line":315,"column":36},"end":{"line":315,"column":63}},"199":{"start":{"line":318,"column":37},"end":{"line":318,"column":64}},"200":{"start":{"line":322,"column":24},"end":{"line":325,"column":25}},"201":{"start":{"line":322,"column":38},"end":{"line":322,"column":54}},"202":{"start":{"line":323,"column":28},"end":{"line":323,"column":119}},"203":{"start":{"line":323,"column":44},"end":{"line":323,"column":119}},"204":{"start":{"line":324,"column":28},"end":{"line":324,"column":40}},"205":{"start":{"line":338,"column":16},"end":{"line":363,"column":20}},"206":{"start":{"line":339,"column":33},"end":{"line":339,"column":37}},"207":{"start":{"line":341,"column":28},"end":{"line":341,"column":33}},"208":{"start":{"line":342,"column":20},"end":{"line":349,"column":27}},"209":{"start":{"line":343,"column":36},"end":{"line":343,"column":60}},"210":{"start":{"line":344,"column":34},"end":{"line":344,"column":42}},"211":{"start":{"line":345,"column":36},"end":{"line":345,"column":44}},"212":{"start":{"line":347,"column":24},"end":{"line":347,"column":74}},"213":{"start":{"line":348,"column":24},"end":{"line":348,"column":34}},"214":{"start":{"line":351,"column":20},"end":{"line":356,"column":22}},"215":{"start":{"line":352,"column":24},"end":{"line":354,"column":27}},"216":{"start":{"line":353,"column":28},"end":{"line":353,"column":71}},"217":{"start":{"line":353,"column":52},"end":{"line":353,"column":71}},"218":{"start":{"line":355,"column":24},"end":{"line":355,"column":38}},"219":{"start":{"line":358,"column":20},"end":{"line":362,"column":22}},"220":{"start":{"line":359,"column":24},"end":{"line":361,"column":60}},"221":{"start":{"line":360,"column":28},"end":{"line":360,"column":58}},"222":{"start":{"line":379,"column":27},"end":{"line":379,"column":97}},"223":{"start":{"line":380,"column":28},"end":{"line":380,"column":98}},"224":{"start":{"line":382,"column":29},"end":{"line":382,"column":33}},"225":{"start":{"line":384,"column":36},"end":{"line":384,"column":106}},"226":{"start":{"line":385,"column":29},"end":{"line":385,"column":99}},"227":{"start":{"line":388,"column":16},"end":{"line":390,"column":17}},"228":{"start":{"line":389,"column":20},"end":{"line":389,"column":50}},"229":{"start":{"line":393,"column":30},"end":{"line":401,"column":17}},"230":{"start":{"line":394,"column":20},"end":{"line":394,"column":51}},"231":{"start":{"line":394,"column":39},"end":{"line":394,"column":51}},"232":{"start":{"line":395,"column":20},"end":{"line":399,"column":21}},"233":{"start":{"line":396,"column":24},"end":{"line":396,"column":85}},"234":{"start":{"line":396,"column":73},"end":{"line":396,"column":85}},"235":{"start":{"line":400,"column":20},"end":{"line":400,"column":33}},"236":{"start":{"line":403,"column":28},"end":{"line":410,"column":17}},"237":{"start":{"line":404,"column":20},"end":{"line":404,"column":76}},"238":{"start":{"line":404,"column":67},"end":{"line":404,"column":76}},"239":{"start":{"line":405,"column":20},"end":{"line":409,"column":30}},"240":{"start":{"line":406,"column":24},"end":{"line":408,"column":34}},"241":{"start":{"line":407,"column":28},"end":{"line":407,"column":44}},"242":{"start":{"line":413,"column":16},"end":{"line":417,"column":17}},"243":{"start":{"line":414,"column":20},"end":{"line":414,"column":90}},"244":{"start":{"line":414,"column":36},"end":{"line":414,"column":90}},"245":{"start":{"line":415,"column":20},"end":{"line":415,"column":32}},"246":{"start":{"line":416,"column":20},"end":{"line":416,"column":32}},"247":{"start":{"line":418,"column":35},"end":{"line":477,"column":22}},"248":{"start":{"line":419,"column":20},"end":{"line":475,"column":21}},"249":{"start":{"line":421,"column":24},"end":{"line":421,"column":63}},"250":{"start":{"line":421,"column":54},"end":{"line":421,"column":63}},"251":{"start":{"line":423,"column":38},"end":{"line":423,"column":75}},"252":{"start":{"line":424,"column":36},"end":{"line":424,"column":69}},"253":{"start":{"line":425,"column":41},"end":{"line":425,"column":79}},"254":{"start":{"line":427,"column":24},"end":{"line":453,"column":25}},"255":{"start":{"line":429,"column":48},"end":{"line":432,"column":29}},"256":{"start":{"line":430,"column":32},"end":{"line":430,"column":163}},"257":{"start":{"line":430,"column":75},"end":{"line":430,"column":163}},"258":{"start":{"line":431,"column":32},"end":{"line":431,"column":45}},"259":{"start":{"line":434,"column":46},"end":{"line":437,"column":29}},"260":{"start":{"line":435,"column":32},"end":{"line":435,"column":153}},"261":{"start":{"line":435,"column":71},"end":{"line":435,"column":153}},"262":{"start":{"line":436,"column":32},"end":{"line":436,"column":45}},"263":{"start":{"line":439,"column":28},"end":{"line":442,"column":29}},"264":{"start":{"line":440,"column":32},"end":{"line":440,"column":43}},"265":{"start":{"line":441,"column":32},"end":{"line":441,"column":41}},"266":{"start":{"line":444,"column":28},"end":{"line":447,"column":29}},"267":{"start":{"line":445,"column":32},"end":{"line":445,"column":43}},"268":{"start":{"line":446,"column":32},"end":{"line":446,"column":41}},"269":{"start":{"line":449,"column":28},"end":{"line":452,"column":29}},"270":{"start":{"line":450,"column":32},"end":{"line":450,"column":43}},"271":{"start":{"line":451,"column":32},"end":{"line":451,"column":41}},"272":{"start":{"line":455,"column":40},"end":{"line":455,"column":68}},"273":{"start":{"line":456,"column":38},"end":{"line":456,"column":56}},"274":{"start":{"line":459,"column":24},"end":{"line":471,"column":25}},"275":{"start":{"line":460,"column":46},"end":{"line":468,"column":30}},"276":{"start":{"line":461,"column":32},"end":{"line":464,"column":33}},"277":{"start":{"line":462,"column":36},"end":{"line":462,"column":50}},"278":{"start":{"line":463,"column":36},"end":{"line":463,"column":53}},"279":{"start":{"line":465,"column":32},"end":{"line":465,"column":42}},"280":{"start":{"line":467,"column":32},"end":{"line":467,"column":54}},"281":{"start":{"line":470,"column":28},"end":{"line":470,"column":63}},"282":{"start":{"line":470,"column":52},"end":{"line":470,"column":63}},"283":{"start":{"line":474,"column":24},"end":{"line":474,"column":52}},"284":{"start":{"line":476,"column":20},"end":{"line":476,"column":29}},"285":{"start":{"line":480,"column":16},"end":{"line":489,"column":19}},"286":{"start":{"line":481,"column":20},"end":{"line":484,"column":21}},"287":{"start":{"line":482,"column":24},"end":{"line":482,"column":73}},"288":{"start":{"line":482,"column":64},"end":{"line":482,"column":73}},"289":{"start":{"line":483,"column":24},"end":{"line":483,"column":103}},"290":{"start":{"line":485,"column":20},"end":{"line":488,"column":36}},"291":{"start":{"line":486,"column":24},"end":{"line":486,"column":67}},"292":{"start":{"line":486,"column":58},"end":{"line":486,"column":67}},"293":{"start":{"line":487,"column":24},"end":{"line":487,"column":73}},"294":{"start":{"line":488,"column":27},"end":{"line":488,"column":36}},"295":{"start":{"line":490,"column":16},"end":{"line":490,"column":28}},"296":{"start":{"line":501,"column":29},"end":{"line":501,"column":33}},"297":{"start":{"line":503,"column":36},"end":{"line":503,"column":108}},"298":{"start":{"line":506,"column":16},"end":{"line":508,"column":17}},"299":{"start":{"line":507,"column":20},"end":{"line":507,"column":32}},"300":{"start":{"line":509,"column":35},"end":{"line":509,"column":47}},"301":{"start":{"line":510,"column":31},"end":{"line":535,"column":18}},"302":{"start":{"line":512,"column":33},"end":{"line":512,"column":35}},"303":{"start":{"line":513,"column":20},"end":{"line":518,"column":21}},"304":{"start":{"line":514,"column":24},"end":{"line":514,"column":87}},"305":{"start":{"line":517,"column":24},"end":{"line":517,"column":52}},"306":{"start":{"line":523,"column":20},"end":{"line":532,"column":21}},"307":{"start":{"line":524,"column":24},"end":{"line":527,"column":31}},"308":{"start":{"line":525,"column":28},"end":{"line":525,"column":61}},"309":{"start":{"line":525,"column":46},"end":{"line":525,"column":61}},"310":{"start":{"line":526,"column":28},"end":{"line":526,"column":37}},"311":{"start":{"line":530,"column":24},"end":{"line":530,"column":44}},"312":{"start":{"line":531,"column":24},"end":{"line":531,"column":128}},"313":{"start":{"line":531,"column":42},"end":{"line":531,"column":128}},"314":{"start":{"line":534,"column":20},"end":{"line":534,"column":32}},"315":{"start":{"line":537,"column":16},"end":{"line":537,"column":34}},"316":{"start":{"line":538,"column":16},"end":{"line":538,"column":28}},"317":{"start":{"line":549,"column":29},"end":{"line":549,"column":33}},"318":{"start":{"line":551,"column":37},"end":{"line":551,"column":109}},"319":{"start":{"line":553,"column":16},"end":{"line":555,"column":17}},"320":{"start":{"line":554,"column":20},"end":{"line":554,"column":32}},"321":{"start":{"line":556,"column":33},"end":{"line":556,"column":45}},"322":{"start":{"line":558,"column":31},"end":{"line":575,"column":18}},"323":{"start":{"line":560,"column":35},"end":{"line":560,"column":37}},"324":{"start":{"line":561,"column":20},"end":{"line":566,"column":21}},"325":{"start":{"line":562,"column":24},"end":{"line":562,"column":88}},"326":{"start":{"line":565,"column":24},"end":{"line":565,"column":52}},"327":{"start":{"line":569,"column":20},"end":{"line":573,"column":21}},"328":{"start":{"line":569,"column":41},"end":{"line":569,"column":69}},"329":{"start":{"line":571,"column":24},"end":{"line":571,"column":46}},"330":{"start":{"line":572,"column":24},"end":{"line":572,"column":131}},"331":{"start":{"line":572,"column":42},"end":{"line":572,"column":131}},"332":{"start":{"line":574,"column":20},"end":{"line":574,"column":32}},"333":{"start":{"line":577,"column":16},"end":{"line":577,"column":34}},"334":{"start":{"line":578,"column":16},"end":{"line":578,"column":28}},"335":{"start":{"line":583,"column":16},"end":{"line":583,"column":48}},"336":{"start":{"line":587,"column":8},"end":{"line":587,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":21},"end":{"line":3,"column":22}},"loc":{"start":{"line":3,"column":33},"end":{"line":3,"column":661}},"line":3},"1":{"name":"sliceIterator","decl":{"start":{"line":3,"column":44},"end":{"line":3,"column":57}},"loc":{"start":{"line":3,"column":66},"end":{"line":3,"column":428}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":436},"end":{"line":3,"column":437}},"loc":{"start":{"line":3,"column":454},"end":{"line":3,"column":658}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":5,"column":19},"end":{"line":5,"column":20}},"loc":{"start":{"line":5,"column":31},"end":{"line":5,"column":561}},"line":5},"4":{"name":"defineProperties","decl":{"start":{"line":5,"column":42},"end":{"line":5,"column":58}},"loc":{"start":{"line":5,"column":74},"end":{"line":5,"column":349}},"line":5},"5":{"name":"(anonymous_5)","decl":{"start":{"line":5,"column":357},"end":{"line":5,"column":358}},"loc":{"start":{"line":5,"column":405},"end":{"line":5,"column":558}},"line":5},"6":{"name":"_defineProperty","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":24}},"loc":{"start":{"line":7,"column":42},"end":{"line":7,"column":209}},"line":7},"7":{"name":"_classCallCheck","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":24}},"loc":{"start":{"line":9,"column":48},"end":{"line":9,"column":153}},"line":9},"8":{"name":"_possibleConstructorReturn","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":35}},"loc":{"start":{"line":11,"column":48},"end":{"line":11,"column":240}},"line":11},"9":{"name":"_inherits","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":18}},"loc":{"start":{"line":13,"column":41},"end":{"line":13,"column":494}},"line":13},"10":{"name":"(anonymous_10)","decl":{"start":{"line":20,"column":17},"end":{"line":20,"column":18}},"loc":{"start":{"line":20,"column":38},"end":{"line":589,"column":1}},"line":20},"11":{"name":"(anonymous_11)","decl":{"start":{"line":48,"column":11},"end":{"line":48,"column":12}},"loc":{"start":{"line":48,"column":33},"end":{"line":588,"column":5}},"line":48},"12":{"name":"ICSlibs","decl":{"start":{"line":51,"column":17},"end":{"line":51,"column":24}},"loc":{"start":{"line":51,"column":38},"end":{"line":55,"column":9}},"line":51},"13":{"name":"createICalEvents","decl":{"start":{"line":66,"column":28},"end":{"line":66,"column":44}},"loc":{"start":{"line":66,"column":47},"end":{"line":85,"column":13}},"line":66},"14":{"name":"populateICalEvents","decl":{"start":{"line":94,"column":34},"end":{"line":94,"column":52}},"loc":{"start":{"line":94,"column":55},"end":{"line":125,"column":13}},"line":94},"15":{"name":"genIcal","decl":{"start":{"line":98,"column":25},"end":{"line":98,"column":32}},"loc":{"start":{"line":98,"column":44},"end":{"line":112,"column":17}},"line":98},"16":{"name":"(anonymous_16)","decl":{"start":{"line":101,"column":47},"end":{"line":101,"column":48}},"loc":{"start":{"line":101,"column":71},"end":{"line":109,"column":21}},"line":101},"17":{"name":"(anonymous_17)","decl":{"start":{"line":105,"column":111},"end":{"line":105,"column":112}},"loc":{"start":{"line":105,"column":126},"end":{"line":108,"column":25}},"line":105},"18":{"name":"typeSetMessage","decl":{"start":{"line":134,"column":28},"end":{"line":134,"column":42}},"loc":{"start":{"line":134,"column":55},"end":{"line":149,"column":13}},"line":134},"19":{"name":"CreateEventData","decl":{"start":{"line":161,"column":28},"end":{"line":161,"column":43}},"loc":{"start":{"line":161,"column":63},"end":{"line":328,"column":13}},"line":161},"20":{"name":"(anonymous_20)","decl":{"start":{"line":192,"column":27},"end":{"line":192,"column":28}},"loc":{"start":{"line":192,"column":52},"end":{"line":327,"column":17}},"line":192},"21":{"name":"icsDateAdjustment","decl":{"start":{"line":213,"column":53},"end":{"line":213,"column":70}},"loc":{"start":{"line":213,"column":80},"end":{"line":219,"column":21}},"line":213},"22":{"name":"(anonymous_22)","decl":{"start":{"line":216,"column":43},"end":{"line":216,"column":44}},"loc":{"start":{"line":216,"column":61},"end":{"line":218,"column":25}},"line":216},"23":{"name":"(anonymous_23)","decl":{"start":{"line":221,"column":35},"end":{"line":221,"column":36}},"loc":{"start":{"line":221,"column":47},"end":{"line":225,"column":21}},"line":221},"24":{"name":"(anonymous_24)","decl":{"start":{"line":227,"column":33},"end":{"line":227,"column":34}},"loc":{"start":{"line":227,"column":45},"end":{"line":231,"column":21}},"line":227},"25":{"name":"(anonymous_25)","decl":{"start":{"line":233,"column":40},"end":{"line":233,"column":41}},"loc":{"start":{"line":233,"column":52},"end":{"line":237,"column":21}},"line":233},"26":{"name":"(anonymous_26)","decl":{"start":{"line":240,"column":31},"end":{"line":240,"column":32}},"loc":{"start":{"line":240,"column":43},"end":{"line":245,"column":21}},"line":240},"27":{"name":"(anonymous_27)","decl":{"start":{"line":251,"column":36},"end":{"line":251,"column":37}},"loc":{"start":{"line":251,"column":48},"end":{"line":257,"column":21}},"line":251},"28":{"name":"(anonymous_28)","decl":{"start":{"line":259,"column":33},"end":{"line":259,"column":34}},"loc":{"start":{"line":259,"column":45},"end":{"line":266,"column":21}},"line":259},"29":{"name":"(anonymous_29)","decl":{"start":{"line":278,"column":38},"end":{"line":278,"column":39}},"loc":{"start":{"line":278,"column":50},"end":{"line":280,"column":21}},"line":278},"30":{"name":"(anonymous_30)","decl":{"start":{"line":283,"column":37},"end":{"line":283,"column":38}},"loc":{"start":{"line":283,"column":49},"end":{"line":285,"column":21}},"line":283},"31":{"name":"(anonymous_31)","decl":{"start":{"line":287,"column":33},"end":{"line":287,"column":34}},"loc":{"start":{"line":287,"column":45},"end":{"line":326,"column":21}},"line":287},"32":{"name":"(anonymous_32)","decl":{"start":{"line":310,"column":68},"end":{"line":310,"column":69}},"loc":{"start":{"line":310,"column":81},"end":{"line":320,"column":25}},"line":310},"33":{"name":"(anonymous_33)","decl":{"start":{"line":312,"column":57},"end":{"line":312,"column":58}},"loc":{"start":{"line":312,"column":70},"end":{"line":319,"column":29}},"line":312},"34":{"name":"(anonymous_34)","decl":{"start":{"line":314,"column":64},"end":{"line":314,"column":65}},"loc":{"start":{"line":314,"column":77},"end":{"line":316,"column":33}},"line":314},"35":{"name":"Queryfulfilled","decl":{"start":{"line":337,"column":28},"end":{"line":337,"column":42}},"loc":{"start":{"line":337,"column":50},"end":{"line":364,"column":13}},"line":337},"36":{"name":"(anonymous_36)","decl":{"start":{"line":338,"column":27},"end":{"line":338,"column":28}},"loc":{"start":{"line":338,"column":39},"end":{"line":363,"column":17}},"line":338},"37":{"name":"(anonymous_37)","decl":{"start":{"line":342,"column":58},"end":{"line":342,"column":59}},"loc":{"start":{"line":342,"column":79},"end":{"line":349,"column":21}},"line":342},"38":{"name":"(anonymous_38)","decl":{"start":{"line":351,"column":31},"end":{"line":351,"column":32}},"loc":{"start":{"line":351,"column":47},"end":{"line":356,"column":21}},"line":351},"39":{"name":"(anonymous_39)","decl":{"start":{"line":352,"column":45},"end":{"line":352,"column":46}},"loc":{"start":{"line":352,"column":59},"end":{"line":354,"column":25}},"line":352},"40":{"name":"(anonymous_40)","decl":{"start":{"line":358,"column":30},"end":{"line":358,"column":31}},"loc":{"start":{"line":358,"column":42},"end":{"line":362,"column":21}},"line":358},"41":{"name":"(anonymous_41)","decl":{"start":{"line":359,"column":51},"end":{"line":359,"column":52}},"loc":{"start":{"line":359,"column":67},"end":{"line":361,"column":25}},"line":359},"42":{"name":"queryFilter","decl":{"start":{"line":378,"column":28},"end":{"line":378,"column":39}},"loc":{"start":{"line":378,"column":42},"end":{"line":491,"column":13}},"line":378},"43":{"name":"matched","decl":{"start":{"line":393,"column":39},"end":{"line":393,"column":46}},"loc":{"start":{"line":393,"column":59},"end":{"line":401,"column":17}},"line":393},"44":{"name":"limit","decl":{"start":{"line":403,"column":37},"end":{"line":403,"column":42}},"loc":{"start":{"line":403,"column":45},"end":{"line":410,"column":17}},"line":403},"45":{"name":"(anonymous_45)","decl":{"start":{"line":405,"column":48},"end":{"line":405,"column":49}},"loc":{"start":{"line":405,"column":61},"end":{"line":409,"column":21}},"line":405},"46":{"name":"(anonymous_46)","decl":{"start":{"line":406,"column":57},"end":{"line":406,"column":58}},"loc":{"start":{"line":406,"column":71},"end":{"line":408,"column":25}},"line":406},"47":{"name":"(anonymous_47)","decl":{"start":{"line":418,"column":47},"end":{"line":418,"column":48}},"loc":{"start":{"line":418,"column":64},"end":{"line":477,"column":17}},"line":418},"48":{"name":"withStartDate","decl":{"start":{"line":429,"column":57},"end":{"line":429,"column":70}},"loc":{"start":{"line":429,"column":73},"end":{"line":432,"column":29}},"line":429},"49":{"name":"withEndDate","decl":{"start":{"line":434,"column":55},"end":{"line":434,"column":66}},"loc":{"start":{"line":434,"column":69},"end":{"line":437,"column":29}},"line":434},"50":{"name":"(anonymous_50)","decl":{"start":{"line":460,"column":60},"end":{"line":460,"column":61}},"loc":{"start":{"line":460,"column":82},"end":{"line":466,"column":29}},"line":460},"51":{"name":"(anonymous_51)","decl":{"start":{"line":466,"column":42},"end":{"line":466,"column":43}},"loc":{"start":{"line":466,"column":55},"end":{"line":468,"column":29}},"line":466},"52":{"name":"(anonymous_52)","decl":{"start":{"line":480,"column":43},"end":{"line":480,"column":44}},"loc":{"start":{"line":480,"column":59},"end":{"line":489,"column":17}},"line":480},"53":{"name":"assignMember","decl":{"start":{"line":500,"column":28},"end":{"line":500,"column":40}},"loc":{"start":{"line":500,"column":43},"end":{"line":539,"column":13}},"line":500},"54":{"name":"(anonymous_54)","decl":{"start":{"line":510,"column":54},"end":{"line":510,"column":55}},"loc":{"start":{"line":510,"column":76},"end":{"line":535,"column":17}},"line":510},"55":{"name":"(anonymous_55)","decl":{"start":{"line":524,"column":56},"end":{"line":524,"column":57}},"loc":{"start":{"line":524,"column":76},"end":{"line":527,"column":25}},"line":524},"56":{"name":"assignAbsences","decl":{"start":{"line":548,"column":28},"end":{"line":548,"column":42}},"loc":{"start":{"line":548,"column":45},"end":{"line":579,"column":13}},"line":548},"57":{"name":"(anonymous_57)","decl":{"start":{"line":558,"column":52},"end":{"line":558,"column":53}},"loc":{"start":{"line":558,"column":74},"end":{"line":575,"column":17}},"line":558},"58":{"name":"get","decl":{"start":{"line":582,"column":26},"end":{"line":582,"column":29}},"loc":{"start":{"line":582,"column":32},"end":{"line":584,"column":13}},"line":582}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":247},"end":{"line":3,"column":281}},"type":"if","locations":[{"start":{"line":3,"column":247},"end":{"line":3,"column":281}},{"start":{"line":3,"column":247},"end":{"line":3,"column":281}}],"line":3},"1":{"loc":{"start":{"line":3,"column":251},"end":{"line":3,"column":273}},"type":"binary-expr","locations":[{"start":{"line":3,"column":251},"end":{"line":3,"column":252}},{"start":{"line":3,"column":256},"end":{"line":3,"column":273}}],"line":3},"2":{"loc":{"start":{"line":3,"column":339},"end":{"line":3,"column":379}},"type":"if","locations":[{"start":{"line":3,"column":339},"end":{"line":3,"column":379}},{"start":{"line":3,"column":339},"end":{"line":3,"column":379}}],"line":3},"3":{"loc":{"start":{"line":3,"column":343},"end":{"line":3,"column":362}},"type":"binary-expr","locations":[{"start":{"line":3,"column":343},"end":{"line":3,"column":346}},{"start":{"line":3,"column":350},"end":{"line":3,"column":362}}],"line":3},"4":{"loc":{"start":{"line":3,"column":392},"end":{"line":3,"column":409}},"type":"if","locations":[{"start":{"line":3,"column":392},"end":{"line":3,"column":409}},{"start":{"line":3,"column":392},"end":{"line":3,"column":409}}],"line":3},"5":{"loc":{"start":{"line":3,"column":456},"end":{"line":3,"column":656}},"type":"if","locations":[{"start":{"line":3,"column":456},"end":{"line":3,"column":656}},{"start":{"line":3,"column":456},"end":{"line":3,"column":656}}],"line":3},"6":{"loc":{"start":{"line":3,"column":501},"end":{"line":3,"column":656}},"type":"if","locations":[{"start":{"line":3,"column":501},"end":{"line":3,"column":656}},{"start":{"line":3,"column":501},"end":{"line":3,"column":656}}],"line":3},"7":{"loc":{"start":{"line":5,"column":168},"end":{"line":5,"column":198}},"type":"binary-expr","locations":[{"start":{"line":5,"column":168},"end":{"line":5,"column":189}},{"start":{"line":5,"column":193},"end":{"line":5,"column":198}}],"line":5},"8":{"loc":{"start":{"line":5,"column":232},"end":{"line":5,"column":286}},"type":"if","locations":[{"start":{"line":5,"column":232},"end":{"line":5,"column":286}},{"start":{"line":5,"column":232},"end":{"line":5,"column":286}}],"line":5},"9":{"loc":{"start":{"line":5,"column":407},"end":{"line":5,"column":475}},"type":"if","locations":[{"start":{"line":5,"column":407},"end":{"line":5,"column":475}},{"start":{"line":5,"column":407},"end":{"line":5,"column":475}}],"line":5},"10":{"loc":{"start":{"line":5,"column":476},"end":{"line":5,"column":536}},"type":"if","locations":[{"start":{"line":5,"column":476},"end":{"line":5,"column":536}},{"start":{"line":5,"column":476},"end":{"line":5,"column":536}}],"line":5},"11":{"loc":{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},"type":"if","locations":[{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},{"start":{"line":7,"column":44},"end":{"line":7,"column":195}}],"line":7},"12":{"loc":{"start":{"line":9,"column":50},"end":{"line":9,"column":151}},"type":"if","locations":[{"start":{"line":9,"column":50},"end":{"line":9,"column":151}},{"start":{"line":9,"column":50},"end":{"line":9,"column":151}}],"line":9},"13":{"loc":{"start":{"line":11,"column":50},"end":{"line":11,"column":151}},"type":"if","locations":[{"start":{"line":11,"column":50},"end":{"line":11,"column":151}},{"start":{"line":11,"column":50},"end":{"line":11,"column":151}}],"line":11},"14":{"loc":{"start":{"line":11,"column":159},"end":{"line":11,"column":237}},"type":"cond-expr","locations":[{"start":{"line":11,"column":226},"end":{"line":11,"column":230}},{"start":{"line":11,"column":233},"end":{"line":11,"column":237}}],"line":11},"15":{"loc":{"start":{"line":11,"column":159},"end":{"line":11,"column":223}},"type":"binary-expr","locations":[{"start":{"line":11,"column":159},"end":{"line":11,"column":163}},{"start":{"line":11,"column":168},"end":{"line":11,"column":192}},{"start":{"line":11,"column":196},"end":{"line":11,"column":222}}],"line":11},"16":{"loc":{"start":{"line":13,"column":43},"end":{"line":13,"column":208}},"type":"if","locations":[{"start":{"line":13,"column":43},"end":{"line":13,"column":208}},{"start":{"line":13,"column":43},"end":{"line":13,"column":208}}],"line":13},"17":{"loc":{"start":{"line":13,"column":47},"end":{"line":13,"column":102}},"type":"binary-expr","locations":[{"start":{"line":13,"column":47},"end":{"line":13,"column":79}},{"start":{"line":13,"column":83},"end":{"line":13,"column":102}}],"line":13},"18":{"loc":{"start":{"line":13,"column":244},"end":{"line":13,"column":278}},"type":"binary-expr","locations":[{"start":{"line":13,"column":244},"end":{"line":13,"column":254}},{"start":{"line":13,"column":258},"end":{"line":13,"column":278}}],"line":13},"19":{"loc":{"start":{"line":13,"column":374},"end":{"line":13,"column":492}},"type":"if","locations":[{"start":{"line":13,"column":374},"end":{"line":13,"column":492}},{"start":{"line":13,"column":374},"end":{"line":13,"column":492}}],"line":13},"20":{"loc":{"start":{"line":13,"column":390},"end":{"line":13,"column":491}},"type":"cond-expr","locations":[{"start":{"line":13,"column":414},"end":{"line":13,"column":457}},{"start":{"line":13,"column":460},"end":{"line":13,"column":491}}],"line":13},"21":{"loc":{"start":{"line":54,"column":53},"end":{"line":54,"column":104}},"type":"binary-expr","locations":[{"start":{"line":54,"column":53},"end":{"line":54,"column":70}},{"start":{"line":54,"column":74},"end":{"line":54,"column":104}}],"line":54},"22":{"loc":{"start":{"line":67,"column":37},"end":{"line":67,"column":107}},"type":"cond-expr","locations":[{"start":{"line":67,"column":90},"end":{"line":67,"column":102}},{"start":{"line":67,"column":105},"end":{"line":67,"column":107}}],"line":67},"23":{"loc":{"start":{"line":67,"column":37},"end":{"line":67,"column":87}},"type":"binary-expr","locations":[{"start":{"line":67,"column":37},"end":{"line":67,"column":57}},{"start":{"line":67,"column":61},"end":{"line":67,"column":87}}],"line":67},"24":{"loc":{"start":{"line":70,"column":16},"end":{"line":70,"column":71}},"type":"if","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":71}},{"start":{"line":70,"column":16},"end":{"line":70,"column":71}}],"line":70},"25":{"loc":{"start":{"line":70,"column":20},"end":{"line":70,"column":45}},"type":"binary-expr","locations":[{"start":{"line":70,"column":20},"end":{"line":70,"column":35}},{"start":{"line":70,"column":39},"end":{"line":70,"column":45}}],"line":70},"26":{"loc":{"start":{"line":74,"column":41},"end":{"line":74,"column":61}},"type":"binary-expr","locations":[{"start":{"line":74,"column":41},"end":{"line":74,"column":55}},{"start":{"line":74,"column":59},"end":{"line":74,"column":61}}],"line":74},"27":{"loc":{"start":{"line":78,"column":24},"end":{"line":78,"column":49}},"type":"if","locations":[{"start":{"line":78,"column":24},"end":{"line":78,"column":49}},{"start":{"line":78,"column":24},"end":{"line":78,"column":49}}],"line":78},"28":{"loc":{"start":{"line":95,"column":32},"end":{"line":95,"column":102}},"type":"cond-expr","locations":[{"start":{"line":95,"column":85},"end":{"line":95,"column":97}},{"start":{"line":95,"column":100},"end":{"line":95,"column":102}}],"line":95},"29":{"loc":{"start":{"line":95,"column":32},"end":{"line":95,"column":82}},"type":"binary-expr","locations":[{"start":{"line":95,"column":32},"end":{"line":95,"column":52}},{"start":{"line":95,"column":56},"end":{"line":95,"column":82}}],"line":95},"30":{"loc":{"start":{"line":102,"column":24},"end":{"line":102,"column":104}},"type":"if","locations":[{"start":{"line":102,"column":24},"end":{"line":102,"column":104}},{"start":{"line":102,"column":24},"end":{"line":102,"column":104}}],"line":102},"31":{"loc":{"start":{"line":106,"column":28},"end":{"line":106,"column":104}},"type":"if","locations":[{"start":{"line":106,"column":28},"end":{"line":106,"column":104}},{"start":{"line":106,"column":28},"end":{"line":106,"column":104}}],"line":106},"32":{"loc":{"start":{"line":135,"column":34},"end":{"line":135,"column":104}},"type":"cond-expr","locations":[{"start":{"line":135,"column":87},"end":{"line":135,"column":99}},{"start":{"line":135,"column":102},"end":{"line":135,"column":104}}],"line":135},"33":{"loc":{"start":{"line":135,"column":34},"end":{"line":135,"column":84}},"type":"binary-expr","locations":[{"start":{"line":135,"column":34},"end":{"line":135,"column":54}},{"start":{"line":135,"column":58},"end":{"line":135,"column":84}}],"line":135},"34":{"loc":{"start":{"line":138,"column":16},"end":{"line":147,"column":17}},"type":"switch","locations":[{"start":{"line":139,"column":20},"end":{"line":141,"column":30}},{"start":{"line":142,"column":20},"end":{"line":144,"column":30}},{"start":{"line":145,"column":20},"end":{"line":146,"column":104}}],"line":138},"35":{"loc":{"start":{"line":146,"column":24},"end":{"line":146,"column":104}},"type":"if","locations":[{"start":{"line":146,"column":24},"end":{"line":146,"column":104}},{"start":{"line":146,"column":24},"end":{"line":146,"column":104}}],"line":146},"36":{"loc":{"start":{"line":195,"column":20},"end":{"line":197,"column":21}},"type":"if","locations":[{"start":{"line":195,"column":20},"end":{"line":197,"column":21}},{"start":{"line":195,"column":20},"end":{"line":197,"column":21}}],"line":195},"37":{"loc":{"start":{"line":195,"column":24},"end":{"line":195,"column":74}},"type":"binary-expr","locations":[{"start":{"line":195,"column":24},"end":{"line":195,"column":46}},{"start":{"line":195,"column":50},"end":{"line":195,"column":74}}],"line":195},"38":{"loc":{"start":{"line":199,"column":31},"end":{"line":199,"column":50}},"type":"binary-expr","locations":[{"start":{"line":199,"column":31},"end":{"line":199,"column":44}},{"start":{"line":199,"column":48},"end":{"line":199,"column":50}}],"line":199},"39":{"loc":{"start":{"line":214,"column":40},"end":{"line":214,"column":109}},"type":"cond-expr","locations":[{"start":{"line":214,"column":93},"end":{"line":214,"column":105}},{"start":{"line":214,"column":108},"end":{"line":214,"column":109}}],"line":214},"40":{"loc":{"start":{"line":214,"column":40},"end":{"line":214,"column":90}},"type":"binary-expr","locations":[{"start":{"line":214,"column":40},"end":{"line":214,"column":60}},{"start":{"line":214,"column":64},"end":{"line":214,"column":90}}],"line":214},"41":{"loc":{"start":{"line":217,"column":35},"end":{"line":217,"column":89}},"type":"cond-expr","locations":[{"start":{"line":217,"column":47},"end":{"line":217,"column":48}},{"start":{"line":217,"column":51},"end":{"line":217,"column":89}}],"line":217},"42":{"loc":{"start":{"line":217,"column":51},"end":{"line":217,"column":89}},"type":"cond-expr","locations":[{"start":{"line":217,"column":72},"end":{"line":217,"column":85}},{"start":{"line":217,"column":88},"end":{"line":217,"column":89}}],"line":217},"43":{"loc":{"start":{"line":217,"column":51},"end":{"line":217,"column":69}},"type":"binary-expr","locations":[{"start":{"line":217,"column":51},"end":{"line":217,"column":58}},{"start":{"line":217,"column":62},"end":{"line":217,"column":69}}],"line":217},"44":{"loc":{"start":{"line":222,"column":32},"end":{"line":222,"column":110}},"type":"cond-expr","locations":[{"start":{"line":222,"column":70},"end":{"line":222,"column":103}},{"start":{"line":222,"column":106},"end":{"line":222,"column":110}}],"line":222},"45":{"loc":{"start":{"line":222,"column":39},"end":{"line":222,"column":56}},"type":"binary-expr","locations":[{"start":{"line":222,"column":39},"end":{"line":222,"column":48}},{"start":{"line":222,"column":52},"end":{"line":222,"column":56}}],"line":222},"46":{"loc":{"start":{"line":223,"column":24},"end":{"line":223,"column":43}},"type":"if","locations":[{"start":{"line":223,"column":24},"end":{"line":223,"column":43}},{"start":{"line":223,"column":24},"end":{"line":223,"column":43}}],"line":223},"47":{"loc":{"start":{"line":224,"column":31},"end":{"line":224,"column":65}},"type":"cond-expr","locations":[{"start":{"line":224,"column":35},"end":{"line":224,"column":58}},{"start":{"line":224,"column":61},"end":{"line":224,"column":65}}],"line":224},"48":{"loc":{"start":{"line":228,"column":32},"end":{"line":228,"column":104}},"type":"cond-expr","locations":[{"start":{"line":228,"column":70},"end":{"line":228,"column":97}},{"start":{"line":228,"column":100},"end":{"line":228,"column":104}}],"line":228},"49":{"loc":{"start":{"line":228,"column":39},"end":{"line":228,"column":56}},"type":"binary-expr","locations":[{"start":{"line":228,"column":39},"end":{"line":228,"column":48}},{"start":{"line":228,"column":52},"end":{"line":228,"column":56}}],"line":228},"50":{"loc":{"start":{"line":229,"column":24},"end":{"line":229,"column":43}},"type":"if","locations":[{"start":{"line":229,"column":24},"end":{"line":229,"column":43}},{"start":{"line":229,"column":24},"end":{"line":229,"column":43}}],"line":229},"51":{"loc":{"start":{"line":230,"column":31},"end":{"line":230,"column":65}},"type":"cond-expr","locations":[{"start":{"line":230,"column":35},"end":{"line":230,"column":58}},{"start":{"line":230,"column":61},"end":{"line":230,"column":65}}],"line":230},"52":{"loc":{"start":{"line":234,"column":32},"end":{"line":234,"column":114}},"type":"cond-expr","locations":[{"start":{"line":234,"column":72},"end":{"line":234,"column":107}},{"start":{"line":234,"column":110},"end":{"line":234,"column":114}}],"line":234},"53":{"loc":{"start":{"line":234,"column":39},"end":{"line":234,"column":58}},"type":"binary-expr","locations":[{"start":{"line":234,"column":39},"end":{"line":234,"column":50}},{"start":{"line":234,"column":54},"end":{"line":234,"column":58}}],"line":234},"54":{"loc":{"start":{"line":235,"column":24},"end":{"line":235,"column":43}},"type":"if","locations":[{"start":{"line":235,"column":24},"end":{"line":235,"column":43}},{"start":{"line":235,"column":24},"end":{"line":235,"column":43}}],"line":235},"55":{"loc":{"start":{"line":236,"column":31},"end":{"line":236,"column":65}},"type":"cond-expr","locations":[{"start":{"line":236,"column":35},"end":{"line":236,"column":58}},{"start":{"line":236,"column":61},"end":{"line":236,"column":65}}],"line":236},"56":{"loc":{"start":{"line":241,"column":38},"end":{"line":241,"column":67}},"type":"binary-expr","locations":[{"start":{"line":241,"column":38},"end":{"line":241,"column":45}},{"start":{"line":241,"column":49},"end":{"line":241,"column":59}},{"start":{"line":241,"column":63},"end":{"line":241,"column":67}}],"line":241},"57":{"loc":{"start":{"line":242,"column":32},"end":{"line":242,"column":92}},"type":"cond-expr","locations":[{"start":{"line":242,"column":60},"end":{"line":242,"column":85}},{"start":{"line":242,"column":88},"end":{"line":242,"column":92}}],"line":242},"58":{"loc":{"start":{"line":243,"column":24},"end":{"line":243,"column":43}},"type":"if","locations":[{"start":{"line":243,"column":24},"end":{"line":243,"column":43}},{"start":{"line":243,"column":24},"end":{"line":243,"column":43}}],"line":243},"59":{"loc":{"start":{"line":244,"column":31},"end":{"line":244,"column":65}},"type":"cond-expr","locations":[{"start":{"line":244,"column":35},"end":{"line":244,"column":58}},{"start":{"line":244,"column":61},"end":{"line":244,"column":65}}],"line":244},"60":{"loc":{"start":{"line":252,"column":32},"end":{"line":252,"column":108}},"type":"cond-expr","locations":[{"start":{"line":252,"column":62},"end":{"line":252,"column":101}},{"start":{"line":252,"column":104},"end":{"line":252,"column":108}}],"line":252},"61":{"loc":{"start":{"line":252,"column":33},"end":{"line":252,"column":51}},"type":"binary-expr","locations":[{"start":{"line":252,"column":33},"end":{"line":252,"column":45}},{"start":{"line":252,"column":49},"end":{"line":252,"column":51}}],"line":252},"62":{"loc":{"start":{"line":253,"column":24},"end":{"line":256,"column":40}},"type":"if","locations":[{"start":{"line":253,"column":24},"end":{"line":256,"column":40}},{"start":{"line":253,"column":24},"end":{"line":256,"column":40}}],"line":253},"63":{"loc":{"start":{"line":253,"column":28},"end":{"line":253,"column":59}},"type":"binary-expr","locations":[{"start":{"line":253,"column":28},"end":{"line":253,"column":29}},{"start":{"line":253,"column":33},"end":{"line":253,"column":59}}],"line":253},"64":{"loc":{"start":{"line":253,"column":41},"end":{"line":253,"column":48}},"type":"binary-expr","locations":[{"start":{"line":253,"column":41},"end":{"line":253,"column":42}},{"start":{"line":253,"column":46},"end":{"line":253,"column":48}}],"line":253},"65":{"loc":{"start":{"line":254,"column":28},"end":{"line":254,"column":103}},"type":"if","locations":[{"start":{"line":254,"column":28},"end":{"line":254,"column":103}},{"start":{"line":254,"column":28},"end":{"line":254,"column":103}}],"line":254},"66":{"loc":{"start":{"line":268,"column":39},"end":{"line":268,"column":128}},"type":"cond-expr","locations":[{"start":{"line":268,"column":97},"end":{"line":268,"column":109}},{"start":{"line":268,"column":112},"end":{"line":268,"column":128}}],"line":268},"67":{"loc":{"start":{"line":268,"column":40},"end":{"line":268,"column":58}},"type":"binary-expr","locations":[{"start":{"line":268,"column":40},"end":{"line":268,"column":52}},{"start":{"line":268,"column":56},"end":{"line":268,"column":58}}],"line":268},"68":{"loc":{"start":{"line":268,"column":70},"end":{"line":268,"column":86}},"type":"binary-expr","locations":[{"start":{"line":268,"column":70},"end":{"line":268,"column":80}},{"start":{"line":268,"column":84},"end":{"line":268,"column":86}}],"line":268},"69":{"loc":{"start":{"line":268,"column":112},"end":{"line":268,"column":128}},"type":"binary-expr","locations":[{"start":{"line":268,"column":112},"end":{"line":268,"column":122}},{"start":{"line":268,"column":126},"end":{"line":268,"column":128}}],"line":268},"70":{"loc":{"start":{"line":271,"column":34},"end":{"line":271,"column":114}},"type":"cond-expr","locations":[{"start":{"line":271,"column":62},"end":{"line":271,"column":73}},{"start":{"line":271,"column":76},"end":{"line":271,"column":114}}],"line":271},"71":{"loc":{"start":{"line":271,"column":34},"end":{"line":271,"column":59}},"type":"binary-expr","locations":[{"start":{"line":271,"column":34},"end":{"line":271,"column":44}},{"start":{"line":271,"column":48},"end":{"line":271,"column":59}}],"line":271},"72":{"loc":{"start":{"line":271,"column":76},"end":{"line":271,"column":114}},"type":"cond-expr","locations":[{"start":{"line":271,"column":89},"end":{"line":271,"column":100}},{"start":{"line":271,"column":103},"end":{"line":271,"column":114}}],"line":271},"73":{"loc":{"start":{"line":273,"column":38},"end":{"line":273,"column":165}},"type":"cond-expr","locations":[{"start":{"line":273,"column":68},"end":{"line":273,"column":74}},{"start":{"line":273,"column":77},"end":{"line":273,"column":165}}],"line":273},"74":{"loc":{"start":{"line":273,"column":77},"end":{"line":273,"column":165}},"type":"cond-expr","locations":[{"start":{"line":273,"column":107},"end":{"line":273,"column":112}},{"start":{"line":273,"column":115},"end":{"line":273,"column":165}}],"line":273},"75":{"loc":{"start":{"line":273,"column":115},"end":{"line":273,"column":165}},"type":"cond-expr","locations":[{"start":{"line":273,"column":145},"end":{"line":273,"column":156}},{"start":{"line":273,"column":159},"end":{"line":273,"column":165}}],"line":273},"76":{"loc":{"start":{"line":279,"column":31},"end":{"line":279,"column":51}},"type":"cond-expr","locations":[{"start":{"line":279,"column":38},"end":{"line":279,"column":44}},{"start":{"line":279,"column":47},"end":{"line":279,"column":51}}],"line":279},"77":{"loc":{"start":{"line":304,"column":26},"end":{"line":304,"column":65}},"type":"if","locations":[{"start":{"line":304,"column":26},"end":{"line":304,"column":65}},{"start":{"line":304,"column":26},"end":{"line":304,"column":65}}],"line":304},"78":{"loc":{"start":{"line":314,"column":32},"end":{"line":318,"column":64}},"type":"if","locations":[{"start":{"line":314,"column":32},"end":{"line":318,"column":64}},{"start":{"line":314,"column":32},"end":{"line":318,"column":64}}],"line":314},"79":{"loc":{"start":{"line":322,"column":24},"end":{"line":325,"column":25}},"type":"if","locations":[{"start":{"line":322,"column":24},"end":{"line":325,"column":25}},{"start":{"line":322,"column":24},"end":{"line":325,"column":25}}],"line":322},"80":{"loc":{"start":{"line":323,"column":28},"end":{"line":323,"column":119}},"type":"if","locations":[{"start":{"line":323,"column":28},"end":{"line":323,"column":119}},{"start":{"line":323,"column":28},"end":{"line":323,"column":119}}],"line":323},"81":{"loc":{"start":{"line":353,"column":28},"end":{"line":353,"column":71}},"type":"if","locations":[{"start":{"line":353,"column":28},"end":{"line":353,"column":71}},{"start":{"line":353,"column":28},"end":{"line":353,"column":71}}],"line":353},"82":{"loc":{"start":{"line":379,"column":27},"end":{"line":379,"column":97}},"type":"cond-expr","locations":[{"start":{"line":379,"column":80},"end":{"line":379,"column":92}},{"start":{"line":379,"column":95},"end":{"line":379,"column":97}}],"line":379},"83":{"loc":{"start":{"line":379,"column":27},"end":{"line":379,"column":77}},"type":"binary-expr","locations":[{"start":{"line":379,"column":27},"end":{"line":379,"column":47}},{"start":{"line":379,"column":51},"end":{"line":379,"column":77}}],"line":379},"84":{"loc":{"start":{"line":380,"column":28},"end":{"line":380,"column":98}},"type":"cond-expr","locations":[{"start":{"line":380,"column":81},"end":{"line":380,"column":93}},{"start":{"line":380,"column":96},"end":{"line":380,"column":98}}],"line":380},"85":{"loc":{"start":{"line":380,"column":28},"end":{"line":380,"column":78}},"type":"binary-expr","locations":[{"start":{"line":380,"column":28},"end":{"line":380,"column":48}},{"start":{"line":380,"column":52},"end":{"line":380,"column":78}}],"line":380},"86":{"loc":{"start":{"line":384,"column":36},"end":{"line":384,"column":106}},"type":"cond-expr","locations":[{"start":{"line":384,"column":89},"end":{"line":384,"column":101}},{"start":{"line":384,"column":104},"end":{"line":384,"column":106}}],"line":384},"87":{"loc":{"start":{"line":384,"column":36},"end":{"line":384,"column":86}},"type":"binary-expr","locations":[{"start":{"line":384,"column":36},"end":{"line":384,"column":56}},{"start":{"line":384,"column":60},"end":{"line":384,"column":86}}],"line":384},"88":{"loc":{"start":{"line":385,"column":29},"end":{"line":385,"column":99}},"type":"cond-expr","locations":[{"start":{"line":385,"column":82},"end":{"line":385,"column":94}},{"start":{"line":385,"column":97},"end":{"line":385,"column":99}}],"line":385},"89":{"loc":{"start":{"line":385,"column":29},"end":{"line":385,"column":79}},"type":"binary-expr","locations":[{"start":{"line":385,"column":29},"end":{"line":385,"column":49}},{"start":{"line":385,"column":53},"end":{"line":385,"column":79}}],"line":385},"90":{"loc":{"start":{"line":388,"column":16},"end":{"line":390,"column":17}},"type":"if","locations":[{"start":{"line":388,"column":16},"end":{"line":390,"column":17}},{"start":{"line":388,"column":16},"end":{"line":390,"column":17}}],"line":388},"91":{"loc":{"start":{"line":388,"column":20},"end":{"line":388,"column":112}},"type":"binary-expr","locations":[{"start":{"line":388,"column":20},"end":{"line":388,"column":34}},{"start":{"line":388,"column":38},"end":{"line":388,"column":67}},{"start":{"line":388,"column":71},"end":{"line":388,"column":112}}],"line":388},"92":{"loc":{"start":{"line":388,"column":40},"end":{"line":388,"column":59}},"type":"binary-expr","locations":[{"start":{"line":388,"column":40},"end":{"line":388,"column":53}},{"start":{"line":388,"column":57},"end":{"line":388,"column":59}}],"line":388},"93":{"loc":{"start":{"line":394,"column":20},"end":{"line":394,"column":51}},"type":"if","locations":[{"start":{"line":394,"column":20},"end":{"line":394,"column":51}},{"start":{"line":394,"column":20},"end":{"line":394,"column":51}}],"line":394},"94":{"loc":{"start":{"line":396,"column":24},"end":{"line":396,"column":85}},"type":"if","locations":[{"start":{"line":396,"column":24},"end":{"line":396,"column":85}},{"start":{"line":396,"column":24},"end":{"line":396,"column":85}}],"line":396},"95":{"loc":{"start":{"line":396,"column":29},"end":{"line":396,"column":38}},"type":"binary-expr","locations":[{"start":{"line":396,"column":29},"end":{"line":396,"column":32}},{"start":{"line":396,"column":36},"end":{"line":396,"column":38}}],"line":396},"96":{"loc":{"start":{"line":404,"column":20},"end":{"line":404,"column":76}},"type":"if","locations":[{"start":{"line":404,"column":20},"end":{"line":404,"column":76}},{"start":{"line":404,"column":20},"end":{"line":404,"column":76}}],"line":404},"97":{"loc":{"start":{"line":413,"column":16},"end":{"line":417,"column":17}},"type":"if","locations":[{"start":{"line":413,"column":16},"end":{"line":417,"column":17}},{"start":{"line":413,"column":16},"end":{"line":417,"column":17}}],"line":413},"98":{"loc":{"start":{"line":414,"column":20},"end":{"line":414,"column":90}},"type":"if","locations":[{"start":{"line":414,"column":20},"end":{"line":414,"column":90}},{"start":{"line":414,"column":20},"end":{"line":414,"column":90}}],"line":414},"99":{"loc":{"start":{"line":421,"column":24},"end":{"line":421,"column":63}},"type":"if","locations":[{"start":{"line":421,"column":24},"end":{"line":421,"column":63}},{"start":{"line":421,"column":24},"end":{"line":421,"column":63}}],"line":421},"100":{"loc":{"start":{"line":423,"column":38},"end":{"line":423,"column":75}},"type":"binary-expr","locations":[{"start":{"line":423,"column":38},"end":{"line":423,"column":53}},{"start":{"line":423,"column":57},"end":{"line":423,"column":75}}],"line":423},"101":{"loc":{"start":{"line":424,"column":36},"end":{"line":424,"column":69}},"type":"binary-expr","locations":[{"start":{"line":424,"column":36},"end":{"line":424,"column":49}},{"start":{"line":424,"column":53},"end":{"line":424,"column":69}}],"line":424},"102":{"loc":{"start":{"line":425,"column":41},"end":{"line":425,"column":79}},"type":"binary-expr","locations":[{"start":{"line":425,"column":41},"end":{"line":425,"column":59}},{"start":{"line":425,"column":63},"end":{"line":425,"column":79}}],"line":425},"103":{"loc":{"start":{"line":427,"column":24},"end":{"line":453,"column":25}},"type":"if","locations":[{"start":{"line":427,"column":24},"end":{"line":453,"column":25}},{"start":{"line":427,"column":24},"end":{"line":453,"column":25}}],"line":427},"104":{"loc":{"start":{"line":427,"column":28},"end":{"line":427,"column":44}},"type":"binary-expr","locations":[{"start":{"line":427,"column":28},"end":{"line":427,"column":35}},{"start":{"line":427,"column":39},"end":{"line":427,"column":44}}],"line":427},"105":{"loc":{"start":{"line":430,"column":32},"end":{"line":430,"column":163}},"type":"if","locations":[{"start":{"line":430,"column":32},"end":{"line":430,"column":163}},{"start":{"line":430,"column":32},"end":{"line":430,"column":163}}],"line":430},"106":{"loc":{"start":{"line":430,"column":36},"end":{"line":430,"column":73}},"type":"binary-expr","locations":[{"start":{"line":430,"column":36},"end":{"line":430,"column":54}},{"start":{"line":430,"column":58},"end":{"line":430,"column":73}}],"line":430},"107":{"loc":{"start":{"line":430,"column":82},"end":{"line":430,"column":162}},"type":"binary-expr","locations":[{"start":{"line":430,"column":82},"end":{"line":430,"column":151}},{"start":{"line":430,"column":155},"end":{"line":430,"column":162}}],"line":430},"108":{"loc":{"start":{"line":435,"column":32},"end":{"line":435,"column":153}},"type":"if","locations":[{"start":{"line":435,"column":32},"end":{"line":435,"column":153}},{"start":{"line":435,"column":32},"end":{"line":435,"column":153}}],"line":435},"109":{"loc":{"start":{"line":435,"column":36},"end":{"line":435,"column":69}},"type":"binary-expr","locations":[{"start":{"line":435,"column":36},"end":{"line":435,"column":52}},{"start":{"line":435,"column":56},"end":{"line":435,"column":69}}],"line":435},"110":{"loc":{"start":{"line":435,"column":78},"end":{"line":435,"column":152}},"type":"binary-expr","locations":[{"start":{"line":435,"column":78},"end":{"line":435,"column":143}},{"start":{"line":435,"column":147},"end":{"line":435,"column":152}}],"line":435},"111":{"loc":{"start":{"line":439,"column":28},"end":{"line":442,"column":29}},"type":"if","locations":[{"start":{"line":439,"column":28},"end":{"line":442,"column":29}},{"start":{"line":439,"column":28},"end":{"line":442,"column":29}}],"line":439},"112":{"loc":{"start":{"line":439,"column":32},"end":{"line":439,"column":64}},"type":"binary-expr","locations":[{"start":{"line":439,"column":32},"end":{"line":439,"column":47}},{"start":{"line":439,"column":51},"end":{"line":439,"column":64}}],"line":439},"113":{"loc":{"start":{"line":444,"column":28},"end":{"line":447,"column":29}},"type":"if","locations":[{"start":{"line":444,"column":28},"end":{"line":447,"column":29}},{"start":{"line":444,"column":28},"end":{"line":447,"column":29}}],"line":444},"114":{"loc":{"start":{"line":444,"column":32},"end":{"line":444,"column":62}},"type":"binary-expr","locations":[{"start":{"line":444,"column":32},"end":{"line":444,"column":47}},{"start":{"line":444,"column":51},"end":{"line":444,"column":62}}],"line":444},"115":{"loc":{"start":{"line":449,"column":28},"end":{"line":452,"column":29}},"type":"if","locations":[{"start":{"line":449,"column":28},"end":{"line":452,"column":29}},{"start":{"line":449,"column":28},"end":{"line":452,"column":29}}],"line":449},"116":{"loc":{"start":{"line":449,"column":32},"end":{"line":449,"column":60}},"type":"binary-expr","locations":[{"start":{"line":449,"column":32},"end":{"line":449,"column":45}},{"start":{"line":449,"column":49},"end":{"line":449,"column":60}}],"line":449},"117":{"loc":{"start":{"line":456,"column":38},"end":{"line":456,"column":56}},"type":"binary-expr","locations":[{"start":{"line":456,"column":38},"end":{"line":456,"column":46}},{"start":{"line":456,"column":50},"end":{"line":456,"column":56}}],"line":456},"118":{"loc":{"start":{"line":459,"column":24},"end":{"line":471,"column":25}},"type":"if","locations":[{"start":{"line":459,"column":24},"end":{"line":471,"column":25}},{"start":{"line":459,"column":24},"end":{"line":471,"column":25}}],"line":459},"119":{"loc":{"start":{"line":461,"column":32},"end":{"line":464,"column":33}},"type":"if","locations":[{"start":{"line":461,"column":32},"end":{"line":464,"column":33}},{"start":{"line":461,"column":32},"end":{"line":464,"column":33}}],"line":461},"120":{"loc":{"start":{"line":470,"column":28},"end":{"line":470,"column":63}},"type":"if","locations":[{"start":{"line":470,"column":28},"end":{"line":470,"column":63}},{"start":{"line":470,"column":28},"end":{"line":470,"column":63}}],"line":470},"121":{"loc":{"start":{"line":481,"column":20},"end":{"line":484,"column":21}},"type":"if","locations":[{"start":{"line":481,"column":20},"end":{"line":484,"column":21}},{"start":{"line":481,"column":20},"end":{"line":484,"column":21}}],"line":481},"122":{"loc":{"start":{"line":482,"column":24},"end":{"line":482,"column":73}},"type":"if","locations":[{"start":{"line":482,"column":24},"end":{"line":482,"column":73}},{"start":{"line":482,"column":24},"end":{"line":482,"column":73}}],"line":482},"123":{"loc":{"start":{"line":482,"column":28},"end":{"line":482,"column":62}},"type":"binary-expr","locations":[{"start":{"line":482,"column":28},"end":{"line":482,"column":43}},{"start":{"line":482,"column":47},"end":{"line":482,"column":62}}],"line":482},"124":{"loc":{"start":{"line":485,"column":20},"end":{"line":488,"column":36}},"type":"if","locations":[{"start":{"line":485,"column":20},"end":{"line":488,"column":36}},{"start":{"line":485,"column":20},"end":{"line":488,"column":36}}],"line":485},"125":{"loc":{"start":{"line":486,"column":24},"end":{"line":486,"column":67}},"type":"if","locations":[{"start":{"line":486,"column":24},"end":{"line":486,"column":67}},{"start":{"line":486,"column":24},"end":{"line":486,"column":67}}],"line":486},"126":{"loc":{"start":{"line":486,"column":28},"end":{"line":486,"column":56}},"type":"binary-expr","locations":[{"start":{"line":486,"column":28},"end":{"line":486,"column":40}},{"start":{"line":486,"column":44},"end":{"line":486,"column":56}}],"line":486},"127":{"loc":{"start":{"line":503,"column":36},"end":{"line":503,"column":108}},"type":"cond-expr","locations":[{"start":{"line":503,"column":89},"end":{"line":503,"column":101}},{"start":{"line":503,"column":104},"end":{"line":503,"column":108}}],"line":503},"128":{"loc":{"start":{"line":503,"column":36},"end":{"line":503,"column":86}},"type":"binary-expr","locations":[{"start":{"line":503,"column":36},"end":{"line":503,"column":56}},{"start":{"line":503,"column":60},"end":{"line":503,"column":86}}],"line":503},"129":{"loc":{"start":{"line":506,"column":16},"end":{"line":508,"column":17}},"type":"if","locations":[{"start":{"line":506,"column":16},"end":{"line":508,"column":17}},{"start":{"line":506,"column":16},"end":{"line":508,"column":17}}],"line":506},"130":{"loc":{"start":{"line":509,"column":35},"end":{"line":509,"column":47}},"type":"binary-expr","locations":[{"start":{"line":509,"column":35},"end":{"line":509,"column":41}},{"start":{"line":509,"column":45},"end":{"line":509,"column":47}}],"line":509},"131":{"loc":{"start":{"line":523,"column":20},"end":{"line":532,"column":21}},"type":"if","locations":[{"start":{"line":523,"column":20},"end":{"line":532,"column":21}},{"start":{"line":523,"column":20},"end":{"line":532,"column":21}}],"line":523},"132":{"loc":{"start":{"line":525,"column":28},"end":{"line":525,"column":61}},"type":"if","locations":[{"start":{"line":525,"column":28},"end":{"line":525,"column":61}},{"start":{"line":525,"column":28},"end":{"line":525,"column":61}}],"line":525},"133":{"loc":{"start":{"line":531,"column":24},"end":{"line":531,"column":128}},"type":"if","locations":[{"start":{"line":531,"column":24},"end":{"line":531,"column":128}},{"start":{"line":531,"column":24},"end":{"line":531,"column":128}}],"line":531},"134":{"loc":{"start":{"line":551,"column":37},"end":{"line":551,"column":109}},"type":"cond-expr","locations":[{"start":{"line":551,"column":90},"end":{"line":551,"column":102}},{"start":{"line":551,"column":105},"end":{"line":551,"column":109}}],"line":551},"135":{"loc":{"start":{"line":551,"column":37},"end":{"line":551,"column":87}},"type":"binary-expr","locations":[{"start":{"line":551,"column":37},"end":{"line":551,"column":57}},{"start":{"line":551,"column":61},"end":{"line":551,"column":87}}],"line":551},"136":{"loc":{"start":{"line":553,"column":16},"end":{"line":555,"column":17}},"type":"if","locations":[{"start":{"line":553,"column":16},"end":{"line":555,"column":17}},{"start":{"line":553,"column":16},"end":{"line":555,"column":17}}],"line":553},"137":{"loc":{"start":{"line":556,"column":33},"end":{"line":556,"column":45}},"type":"binary-expr","locations":[{"start":{"line":556,"column":33},"end":{"line":556,"column":39}},{"start":{"line":556,"column":43},"end":{"line":556,"column":45}}],"line":556},"138":{"loc":{"start":{"line":569,"column":20},"end":{"line":573,"column":21}},"type":"if","locations":[{"start":{"line":569,"column":20},"end":{"line":573,"column":21}},{"start":{"line":569,"column":20},"end":{"line":573,"column":21}}],"line":569},"139":{"loc":{"start":{"line":572,"column":24},"end":{"line":572,"column":131}},"type":"if","locations":[{"start":{"line":572,"column":24},"end":{"line":572,"column":131}},{"start":{"line":572,"column":24},"end":{"line":572,"column":131}}],"line":572}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":2062,"21":2062,"22":0,"23":0,"24":0,"25":1,"26":1,"27":1,"28":9,"29":9,"30":9,"31":9,"32":8,"33":9,"34":1,"35":1,"36":1,"37":1,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":1,"45":0,"46":1,"47":0,"48":1,"49":1,"50":0,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":199,"116":199,"117":199,"118":34,"119":34,"120":165,"121":165,"122":0,"123":0,"124":199,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":2033,"206":2033,"207":2033,"208":2033,"209":2062,"210":2062,"211":2062,"212":2062,"213":2062,"214":2033,"215":210,"216":210,"217":210,"218":210,"219":2033,"220":210,"221":210,"222":164,"223":164,"224":164,"225":164,"226":164,"227":164,"228":0,"229":164,"230":2004,"231":199,"232":1805,"233":1805,"234":11,"235":1794,"236":164,"237":164,"238":0,"239":164,"240":192,"241":195,"242":164,"243":0,"244":0,"245":0,"246":0,"247":164,"248":2088,"249":2088,"250":0,"251":2088,"252":2088,"253":2088,"254":2088,"255":84,"256":155,"257":155,"258":0,"259":84,"260":113,"261":71,"262":42,"263":84,"264":13,"265":13,"266":71,"267":42,"268":42,"269":29,"270":0,"271":0,"272":2033,"273":2033,"274":2033,"275":2004,"276":2004,"277":210,"278":210,"279":2004,"280":210,"281":2004,"282":210,"283":0,"284":2033,"285":164,"286":102,"287":102,"288":0,"289":102,"290":0,"291":0,"292":0,"293":0,"294":0,"295":164,"296":16,"297":16,"298":16,"299":11,"300":5,"301":5,"302":148,"303":148,"304":148,"305":0,"306":148,"307":148,"308":740,"309":148,"310":740,"311":0,"312":0,"313":0,"314":148,"315":5,"316":5,"317":152,"318":152,"319":152,"320":150,"321":2,"322":2,"323":11,"324":11,"325":11,"326":0,"327":11,"328":10,"329":1,"330":1,"331":0,"332":11,"333":2,"334":2,"335":0,"336":1},"f":{"0":1,"1":0,"2":2062,"3":1,"4":1,"5":1,"6":0,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":199,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":2033,"36":2033,"37":2062,"38":210,"39":210,"40":210,"41":210,"42":164,"43":2004,"44":164,"45":192,"46":195,"47":2088,"48":155,"49":113,"50":2004,"51":210,"52":102,"53":16,"54":148,"55":740,"56":152,"57":11,"58":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[2062,0],"6":[0,0],"7":[9,9],"8":[8,1],"9":[1,0],"10":[0,1],"11":[0,0],"12":[0,1],"13":[0,1],"14":[0,1],"15":[1,0,0],"16":[0,1],"17":[1,0],"18":[1,1],"19":[1,0],"20":[1,0],"21":[1,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[199,0],"33":[199,199],"34":[34,165,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[210,0],"82":[164,0],"83":[164,164],"84":[164,0],"85":[164,164],"86":[164,0],"87":[164,164],"88":[164,0],"89":[164,164],"90":[0,164],"91":[164,164,164],"92":[164,0],"93":[199,1805],"94":[11,1794],"95":[1805,0],"96":[0,164],"97":[0,164],"98":[0,0],"99":[0,2088],"100":[2088,588],"101":[2088,588],"102":[2088,84],"103":[84,2004],"104":[2088,2004],"105":[155,0],"106":[155,155],"107":[155,155],"108":[71,42],"109":[113,71],"110":[71,13],"111":[13,71],"112":[84,84],"113":[42,29],"114":[71,71],"115":[0,29],"116":[29,0],"117":[2033,29],"118":[2004,29],"119":[210,1794],"120":[210,1794],"121":[102,0],"122":[0,102],"123":[102,102],"124":[0,0],"125":[0,0],"126":[0,0],"127":[16,0],"128":[16,16],"129":[11,5],"130":[5,0],"131":[148,0],"132":[148,592],"133":[0,0],"134":[152,0],"135":[152,152],"136":[150,2],"137":[2,0],"138":[10,1],"139":[0,1]},"inputSourceMap":{"version":3,"sources":["ics.libs.js"],"names":["module","exports","ICSmodule","config","require","date","notify","isObject","isFalsy","head","someKeyMatch","isArray","copy","uuidv4","v4","ics","fs","path","reduce","pickBy","identity","sq","moment","opts","debug","absenceMembers","d","eventsArr","inx","length","item","eventData","CreateEventData","event","push","error","genIcal","defer","createEvent","value","reject","productId","icsFilePath","filePath","writeFile","join","err","resolve","promise","deneratedResults","created","populateICalEvents","Object","keys","memberName","absenceType","message","absenceWithMember","self","absenceMember","createdAt","startDate","endDate","type","member","absence_days","confirmedAt","rejectedAt","admitterNote","memberNote","id","admitterId","icsDateAdjustment","dataArr","increment","map","n","c","isValid","utc","toArray","splice","start","lastModified","end","dateStr","uid","toString","duration","days","Number","title","typeSetMessage","name","description","status","busyStatus","categories","organizer","email","env","requiredFields","validEnv","lastTest","filter","b","a","indexOf","query","q","entries","nn","key","match","set","forEach","el","ok","data","limitedSearch","dbName","matched","val","_with","limit","zz","z","filteredData","isStart","isEnd","queryRange","withStartDate","getTime","withEndDate","fulfilled","Queryfulfilled","notDate","itemMatched","k","sort","Date","includeMember","absencesList","arrAsync","members","userId","includeAbsence","memberList","absences"],"mappings":"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","file":"ics.libs.js","sourceRoot":"X:/workflow/open-projects/ics-calendar/libs/ics","sourcesContent":["`use strict`\r\n/** \r\n * @ICSlibs\r\n * - extention to ics module\r\n*/\r\nmodule.exports = (ICSmodule) => {\r\n    const config = require('../../config')\r\n    const { date } = require('../utils')()\r\n    const { notify, isObject, isFalsy, head, someKeyMatch, isArray, copy } = require('x-units')\r\n    const uuidv4 = require('uuid').v4\r\n    const ics = require('ics')\r\n    const fs = require('fs')\r\n    const path = require('path')\r\n    const { reduce, pickBy, identity } = require('lodash')\r\n    const sq = require('simple-q')\r\n    const moment = require('moment')\r\n\r\n    return class ICSlibs extends ICSmodule {\r\n        constructor(opts, debug) {\r\n            super(opts, debug)\r\n        }\r\n\r\n        /** \r\n          * \r\n          * - generate new calendar event for each absenceMember available in `absences.db`\r\n          * @param {array} absenceMembers, optional, merged memberAbsence record, or used last `this.d` cached value after chaining sequence\r\n         */\r\n        createICalEvents(absenceMembers = []) {\r\n\r\n            if (!absenceMembers && this.d) absenceMembers = this.d        \r\n            const eventsArr = [] \r\n\r\n            // 1. get all valid events\r\n            for (let inx = 0; inx < (absenceMembers || []).length; inx++) {\r\n                const item = absenceMembers[inx]\r\n                try {\r\n                    const eventData = this.CreateEventData(item).event()\r\n                    if (!eventData) continue\r\n                    eventsArr.push(eventData)\r\n                } catch (error) {\r\n                    continue\r\n                }     \r\n            }\r\n            return eventsArr\r\n        }\r\n\r\n        /** \r\n         * - `ics.createEvent` populate .ics files\r\n         * @param {array} eventsArr  array created by `createICalEvents`\r\n        */\r\n        async populateICalEvents(eventsArr = []) {\r\n\r\n            function genIcal(eventData) {\r\n                const defer = sq()\r\n\r\n                ics.createEvent(eventData, (error, value) => {\r\n                    if (error) return defer.reject({ [eventData.productId]: error })\r\n\r\n                    const icsFilePath = config.ics.filePath           \r\n                    fs.writeFile(path.join(icsFilePath, `./${eventData.productId}_event.ics`), value, err => {\r\n                        if (err) return defer.reject({ [eventData.productId]: err })\r\n                        defer.resolve({ [eventData.productId]: value })\r\n                    })\r\n                })\r\n\r\n                return defer.promise()\r\n            }\r\n\r\n            const deneratedResults = []\r\n            for (let inx = 0; inx < eventsArr.length; inx++) {\r\n                // add `created` and `error` properties to handle user outputs called by `generateICS`\r\n                try {\r\n                    deneratedResults.push({ created: await genIcal(eventsArr[inx]) })\r\n                } catch (error) {\r\n                    notify({ error, populateICalEvents: true }, 1)\r\n                    deneratedResults.push({ error: { [Object.keys(error)[0]]: true } })\r\n                }\r\n\r\n            }\r\n            return deneratedResults\r\n        }\r\n        \r\n        get availableAbsenceTypes() {\r\n            return ['sickness', 'vacation' ]\r\n        }\r\n\r\n        /** \r\n         * produce formated message based on absenceType and memberName\r\n         * @param {string} absenceType\r\n        */\r\n        typeSetMessage(memberName, absenceType = '') {\r\n            let message\r\n            switch (absenceType) {\r\n                case 'sickness':\r\n                    message = `${memberName} is sick`\r\n                    break\r\n                case 'vacation':\r\n                    message = `${memberName} is on vacation`\r\n                    break\r\n                default:\r\n                    if (this.debug) notify(`[typeSetMessage] wrong absenceType: ${absenceType}`, 0)\r\n            }\r\n            return message\r\n        }\r\n\r\n        /** \r\n         * \r\n         * - performs validation against `requiredFields`, and generates new ics event file based on `ics` npm package `https://www.npmjs.com/package/ics`\r\n         * - to execute call: `CreateEventData({...}).event()`\r\n         * @param {object} absenceWithMember data to parse new even\r\n         * @returns valid event object or null\r\n        */\r\n        CreateEventData(absenceWithMember) {\r\n\r\n            const self = this\r\n            \r\n            // const absenceMemberExample = {\r\n            //     absence_days: [5], refer to duration\r\n            //     admitterNote: \"some notice to add\", << use this if `memberNote` is lesser then\r\n\r\n            // NOTE  NOT TOO SURE WHAT TAKES PRIORITY HERE\r\n            //     confirmedAt: \"2017-01-27T17:35:03.000+01:00\",  << refer to lastModified\r\n            //     createdAt: \"2017-01-25T11:06:19.000+01:00\", << refer to created\r\n            //     startDate: \"2017-02-23\", <<  refer to start\r\n            //     endDate: \"2017-03-11\",  refer to end \r\n\r\n            //     rejectedAt: null, << if endDate not set\r\n            //     id: 2909, << refers to productId\r\n            //     memberNote: \"blah\", << use this if `admitterNote` is lesser then\r\n            //     lastModified:   refers to lastModified\r\n            //     admitterId:123, NOTE refers to organizer ?? \r\n            //     type: \"vacation\",\r\n\r\n            //     // member: {\r\n            //     //     name: \"Sandra\"\r\n            //     // }\r\n            // }\r\n\r\n            /** \r\n             * `ics offset notes vs moment/date format:`\r\n             * - date properties, for example: `created=[2017,1,2,0]` render: `2017-1-2` but, standard date/moment.js format would render `2017-0-1`, The month and date index counts from 0 (+1) < fixed with `icsDateAdjustment`\r\n             * - `absenceMember` is an absence document with `member:{}` property\r\n            */\r\n            return (new function (absenceMember) {\r\n                if (isFalsy(absenceMember) || !isObject(absenceMember)) {\r\n                    throw ('absenceMember must not be empty')\r\n                }\r\n                const { createdAt, startDate, endDate, type, member, absence_days, confirmedAt, rejectedAt, admitterNote, memberNote, id, admitterId } = absenceMember || {}\r\n\r\n                const icsDateAdjustment = (dataArr, increment = 1) => {\r\n                    return dataArr.map((n, inx) => inx === 0 ? n : (inx > 0 && inx < 3) ? n + increment : n)\r\n                }\r\n\r\n                this.created = () => {\r\n                    const c = moment(createdAt || null).isValid() ? moment(createdAt).utc().toArray() : null\r\n                    if (c) c.splice(6) // max size is 6\r\n                    return c ? icsDateAdjustment(c, 1) : null\r\n                }\r\n\r\n                this.start = () => {\r\n                    const c = moment(startDate || null).isValid() ? moment(startDate).toArray() : null\r\n                    if (c) c.splice(6) // max size is 6\r\n                    return c ? icsDateAdjustment(c, 1) : null\r\n                }\r\n\r\n                this.lastModified = () => {\r\n                    const c = moment(confirmedAt || null).isValid() ? moment(confirmedAt).utc().toArray() : null\r\n                    if (c) c.splice(6) // max size is 6\r\n                    return c ? icsDateAdjustment(c, 1) : null\r\n                }\r\n\r\n                // `duration:` or `end:` is required, not both\r\n                this.end = () => {\r\n                    const dateStr = endDate || rejectedAt || null\r\n                    const c = moment(dateStr).isValid() ? moment(endDate).toArray() : null\r\n                    if (c) c.splice(6) // max size is 6\r\n                    return c ? icsDateAdjustment(c, 1) : null\r\n                }\r\n\r\n                this.uid = uuidv4() \r\n                this.productId = id.toString()\r\n\r\n                // NOTE not sure of this format, there is not valid example on absences.db\r\n                this.duration = () => {\r\n                    const d = (absence_days || []).length ? { days: head(absence_days).toString() } : null\r\n                    if (d && Number((d || {}).days) < 1) {\r\n                        if (self.debug) notify('[CreateEventData] absence_days must be gte >0', 0)\r\n                        return null\r\n                    } else return d\r\n                }\r\n\r\n                this.title = () => {\r\n                    try {\r\n                        return self.typeSetMessage(member.name, type)\r\n                    } catch (err) {\r\n                    // member not provided\r\n                        return null\r\n                    }\r\n                }\r\n\r\n                this.description = (admitterNote || '').length > (memberNote || '').length\r\n                    ? admitterNote : memberNote || ''\r\n\r\n                // TENTATIVE, CONFIRMED, CANCELLED\r\n                this.status = this.start && !rejectedAt ? 'CONFIRMED' : rejectedAt ? 'CANCELLED' : 'TENTATIVE'\r\n                // 'BUSY' OR 'FREE' OR 'TENTATIVE' OR 'OOF'\r\n                this.busyStatus = this.status === 'CONFIRMED' ? 'BUSY' : this.status === 'CANCELLED' ? 'OOF' : this.status === 'TENTATIVE' ? 'TENTATIVE' : 'FREE'\r\n            \r\n                // NOTE optional\r\n \r\n                // currently only got type for category\r\n                this.categories = () => {\r\n                    return type ? [type] : null\r\n                }\r\n\r\n                // NOTE note too sure if `admitterId` should be the organizer ?\r\n                this.organizer = () => {\r\n                    return pickBy({ name: 'Admin', email: 'admin@Crewmeister.com', admitterId }, identity)\r\n                }\r\n\r\n                this.event = () => {\r\n                    const env = {\r\n                        productId: this.productId,\r\n                        uid: this.uid,\r\n                        created: this.created(),\r\n                        start: this.start(),\r\n                        end: this.end(),\r\n                        lastModified: this.lastModified(),\r\n                        duration: this.duration(),\r\n                        status: this.status,\r\n                        busyStatus: this.busyStatus,\r\n                        title: this.title(),\r\n                        description: this.description,\r\n                        organizer: this.organizer(), \r\n                        categories: this.categories()\r\n                    }\r\n\r\n                    // NOTE can only allow 1 end time\r\n                    if (env['duration']) delete env['end']\r\n\r\n                    const requiredFields = ['uid', 'productId', 'created' /*, 'start' */, ['end', 'duration'], 'status', 'busyStatus', 'title']\r\n\r\n                    // exclude any empty props\r\n                    let validEnv = pickBy(env, identity)\r\n                    const lastTest = Object.keys(validEnv).filter(a => {\r\n                      \r\n                        return requiredFields.filter(b => {\r\n                        // at least 1 should match\r\n                            if (isArray(b)) return b.filter(c => a.indexOf(c) !== -1).length > 0\r\n                            // all should match\r\n                            else return a.indexOf(b) !== -1                  \r\n                        }).length\r\n                \r\n                    }).length >= requiredFields.length\r\n\r\n                    if (lastTest) return validEnv\r\n                    else {\r\n                        if (self.debug) notify('[CreateValidEventData] failed [requiredFields,...] validation', 1)\r\n                        return null\r\n                    }\r\n                }\r\n            }(absenceWithMember))\r\n        }\r\n\r\n        /** \r\n         *  - per database record, check if profided query was fulfilled \r\n         * @param {object} query can search thru name properties provided by members/absences database\r\n         */\r\n        Queryfulfilled(query) {\r\n            return (new function () {\r\n                const q = query\r\n                this.query = Object.entries(q).reduce((nn, [key, value]) => {\r\n                    nn.push({ value, match: false, key })\r\n                    return nn\r\n                }, [])\r\n\r\n                this.set = (name) => {\r\n                    this.query.forEach((el) => {\r\n                        if (el['key'] === name) el['match'] = true\r\n                    })\r\n                    return this\r\n                }\r\n\r\n                this.ok = () => {\r\n                    return this.query.filter((item) => item['match'] === true).length === Object.keys(q).length\r\n                }\r\n            }())\r\n        }\r\n\r\n        /**\r\n      * - can query thru all available props in absence database\r\n      * - applied limit to only filter thru `limitedSearch[]` props\r\n      * @param {array} data required\r\n      * @param {object} query required\r\n      * @param {array} limitedSearch array include limit to which items to filter thru\r\n      * @param {string} dbName reference to which db we are performing this filter\r\n      * @returns [] filtered array by query filter\r\n      */\r\n        queryFilter(data = [], query = {}, limitedSearch = [], dbName = '') {\r\n\r\n            if (!limitedSearch || !(limitedSearch || []).length || limitedSearch.indexOf('ALL_ITEMS') !== -1) {\r\n                limitedSearch = ['ALL_ITEMS'] // only limit to these props\r\n            }\r\n\r\n            // when values try to match (string num) === num\r\n            const matched = (val, _with) => {\r\n                if (val === _with) return true\r\n                try {\r\n                    if ((val || '').toString() === _with.toString()) return true\r\n                } catch (err) {\r\n                    // upy\r\n                }\r\n                return false\r\n            }\r\n\r\n            const limit = () => {\r\n                if (limitedSearch.indexOf('ALL_ITEMS') !== -1) return 1\r\n                return limitedSearch.filter(z => {\r\n                    return Object.keys(query).filter(zz => zz === z).length\r\n                }).length\r\n            }\r\n\r\n            // apply limit to block search thru other props\r\n            if (!limit()) {\r\n                if (this.debug) notify('[queryFilter] no match for limitedSearch', 0)\r\n                this.d = []\r\n                return this\r\n            }\r\n            const filteredData = data.reduce((n, el) => {\r\n                try {\r\n                    // only perform if any matching keys are found\r\n                    if (!someKeyMatch(el, query)) return n\r\n                    // const queryMatched = query[key] !== undefined\r\n                    const isStart = el['startDate'] && query['startDate']\r\n                    const isEnd = el['endDate'] && query['endDate']\r\n                    const queryRange = query['startDate'] && query['endDate']\r\n                    // if query has date applied and item also has data\r\n                    if (isStart || isEnd) {\r\n\r\n                        const withStartDate = () => {\r\n                            if (query['startDate'] && el['startDate']) return date(query['startDate']).getTime() <= date(el['startDate']).getTime() && isStart\r\n                            return false\r\n                        }\r\n\r\n                        const withEndDate = () => {\r\n                            if (query['endDate'] && el['endDate']) return date(el['endDate']).getTime() <= date(query['endDate']).getTime() && isEnd\r\n                            return false\r\n                        }\r\n\r\n                        if (withStartDate() && withEndDate()) {\r\n                            n.push(el)\r\n                            return n\r\n                        }\r\n\r\n                        if (withStartDate() && !queryRange) {\r\n                            n.push(el)\r\n                            return n\r\n                        }\r\n\r\n                        if (withEndDate() && !queryRange) {\r\n                            n.push(el)\r\n                            return n\r\n                        }\r\n                    }\r\n\r\n                    const fulfilled = this.Queryfulfilled(query)\r\n                    const notDate = !isStart || !isEnd\r\n\r\n                    // all other query props matching current dataTable\r\n                    if (notDate) {\r\n                        const itemMatched = reduce(query, (nn, val, k) => {\r\n                            if (matched(el[k], val)) {\r\n                                nn.push(true)\r\n                                fulfilled.set(k)\r\n                            }\r\n                            return nn\r\n                        }, []).filter(f => fulfilled.ok())\r\n                        // \r\n                        if (itemMatched.length) n.push(el)\r\n                    }\r\n                    // end of try    \r\n                } catch (error) {\r\n                    notify({ error }, 1)\r\n                }\r\n                return n\r\n            }, [])\r\n           \r\n            // sort all by createdAt  or userId\r\n            this.d = filteredData.sort((a, b) => {\r\n                if (dbName === 'absences') {\r\n                    if (!a['createdAt'] || !b['createdAt']) return 1\r\n                    return new Date(a['createdAt']).getTime() - new Date(b['createdAt']).getTime()\r\n                }\r\n                if (dbName === 'members') {\r\n                    if (!a['userId'] || !b['userId']) return 1\r\n                    return Number(a['userId']) - Number(b['userId'])\r\n                } else return 1\r\n            })\r\n            return this\r\n        }\r\n\r\n        /** \r\n        * @param {boolean} includeMember when set, we grab `this.d` generated by `absences()`,  then execute `members({userId})` for each absence\r\n        * @returns arrAsync including `member:{}` property\r\n       */\r\n        assignMember(includeMember = null) {\r\n          \r\n            if (!includeMember) {\r\n                return this\r\n            }\r\n            const absencesList = (this.d || [])    \r\n            const arrAsync = copy(absencesList).map(async (item) => {\r\n                // conditionaly append `member` \r\n                let member = {}\r\n                try {\r\n                    member = head(await this.members({ userId: item.userId }))\r\n                } catch (error) {\r\n                    // ups\r\n                    notify({ error }, 1)\r\n                }\r\n                    \r\n                // NOTE\r\n                // 1. assing `{member}` to absences/item\r\n                // 2. reduce to only show `name`\r\n                if (member) {\r\n                    item['member'] = reduce(member, (n, el, k) => {\r\n                        if (k === 'name') n['name'] = el\r\n                        return n\r\n                    }, {})\r\n                } else {\r\n                    // return absences/item without member\r\n                    item['member'] = {}\r\n                    if (this.debug) notify(`[absences] no member for userId:${item.userId} found on members.db `, 0)\r\n                }\r\n                    \r\n                return item\r\n            })\r\n\r\n            this.d = arrAsync\r\n            return this\r\n        }\r\n\r\n        /** \r\n        * @param {boolean} includeAbsence when set, we grab `this.d` generated by `members()`,  then execute `absences({userId})` for each member\r\n        * @returns arrAsync including `absences:{}` property\r\n       */\r\n        assignAbsences(includeAbsence = null) {\r\n            if (!includeAbsence) {\r\n                return this\r\n            }\r\n            const memberList = (this.d || [])\r\n\r\n            const arrAsync = copy(memberList).map(async (item) => {\r\n                // conditionaly append `absences` \r\n                let absences = []\r\n                try {\r\n                    absences = await this.absences({ userId: item.userId }, null)\r\n                } catch (error) {\r\n                    // ups\r\n                    notify({ error }, 1)\r\n                }\r\n\r\n                // assing `{absences}` to member/item\r\n                if (absences.length) item['absences'] = absences\r\n                else {\r\n                    // return members/item without absences\r\n                    item['absences'] = []\r\n                    if (this.debug) notify(`[absences] no absences for userId:${item.userId} found on absences.db `, 0)\r\n                }\r\n                return item\r\n            })\r\n\r\n            this.d = arrAsync\r\n            return this\r\n        }\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b71251e7201672ffbf0e5ed8ab68a5b369a4c56f","contentHash":"0bcc6760cd53877d162e916e0f4195c56edaadb235eac99ebbcf3557c2a6bf91"}}